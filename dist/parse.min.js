/**
 * Parse JavaScript SDK v2.1.0
 *
 * Copyright (c) 2015-present, Parse, LLC.
 * All rights reserved.
 *
 * The source tree of this library can be found at
 *   https://github.com/ParsePlatform/Parse-SDK-JS
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Parse=e()}}(function(){return function a(s,o,u){function l(t,e){if(!o[t]){if(!s[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[t]={exports:{}};s[t][0].call(i.exports,function(e){return l(s[t][1][e]||e)},i,i.exports,a,s,o,u)}return o[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.track=function(e,t){if(0===(e=(e=(e=e||"").replace(/^\s*/,"")).replace(/\s*$/,"")).length)throw new TypeError("A name for the custom event must be provided");for(var r in t)if("string"!=typeof r||"string"!=typeof t[r])throw new TypeError('track() dimensions expects keys and values of type "string".');return i.default.getAnalyticsController().track(e,t)};var i=n(e("./CoreManager"));var a={track:function(e,t){return i.default.getRESTController().request("POST","events/"+e,{dimensions:t})}};i.default.setAnalyticsController(a)},{"./CoreManager":3,"@babel/runtime/helpers/interopRequireDefault":52}],2:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.run=function(e,t,r){if(r=r||{},"string"!=typeof e||0===e.length)throw new TypeError("Cloud function name must be a string.");var n={};r.useMasterKey&&(n.useMasterKey=r.useMasterKey);r.sessionToken&&(n.sessionToken=r.sessionToken);return a.default.getCloudController().run(e,t,n)},r.getJobsData=function(){return a.default.getCloudController().getJobsData({useMasterKey:!0})},r.startJob=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("Cloud job name must be a string.");return a.default.getCloudController().startJob(e,t,{useMasterKey:!0})},r.getJobStatus=function(e){return new i.default("_JobStatus").get(e,{useMasterKey:!0})};var a=n(e("./CoreManager")),s=n(e("./decode")),o=n(e("./encode")),u=n(e("./ParseError")),i=n(e("./ParseQuery"));var l={run:function(e,t,r){var n=a.default.getRESTController(),i=(0,o.default)(t,!0);return n.request("POST","functions/"+e,i,r).then(function(e){var t=(0,s.default)(e);if(t&&t.hasOwnProperty("result"))return Promise.resolve(t.result);throw new u.default(u.default.INVALID_JSON,"The server returned an invalid response.")})},getJobsData:function(e){return a.default.getRESTController().request("GET","cloud_code/jobs/data",null,e)},startJob:function(e,t,r){var n=a.default.getRESTController(),i=(0,o.default)(t,!0);return n.request("POST","jobs/"+e,i,r)}};a.default.setCloudController(l)},{"./CoreManager":3,"./ParseError":13,"./ParseQuery":21,"./decode":36,"./encode":37,"@babel/runtime/helpers/interopRequireDefault":52}],3:[function(e,n,t){(function(e){"use strict";var r={IS_NODE:void 0!==e&&!!e.versions&&!!e.versions.node&&!e.versions.electron,REQUEST_ATTEMPT_LIMIT:5,SERVER_URL:"https://api.parse.com/1",LIVEQUERY_SERVER_URL:null,VERSION:"js2.1.0",APPLICATION_ID:null,JAVASCRIPT_KEY:null,MASTER_KEY:null,USE_MASTER_KEY:!1,PERFORM_USER_REWRITE:!0,FORCE_REVOCABLE_SESSION:!1};function t(t,e,r){e.forEach(function(e){if("function"!=typeof r[e])throw new Error("".concat(t," must implement ").concat(e,"()"))})}n.exports={get:function(e){if(r.hasOwnProperty(e))return r[e];throw new Error("Configuration key not found: "+e)},set:function(e,t){r[e]=t},setAnalyticsController:function(e){t("AnalyticsController",["track"],e),r.AnalyticsController=e},getAnalyticsController:function(){return r.AnalyticsController},setCloudController:function(e){t("CloudController",["run","getJobsData","startJob"],e),r.CloudController=e},getCloudController:function(){return r.CloudController},setConfigController:function(e){t("ConfigController",["current","get"],e),r.ConfigController=e},getConfigController:function(){return r.ConfigController},setFileController:function(e){t("FileController",["saveFile","saveBase64"],e),r.FileController=e},getFileController:function(){return r.FileController},setInstallationController:function(e){t("InstallationController",["currentInstallationId"],e),r.InstallationController=e},getInstallationController:function(){return r.InstallationController},setObjectController:function(e){t("ObjectController",["save","fetch","destroy"],e),r.ObjectController=e},getObjectController:function(){return r.ObjectController},setObjectStateController:function(e){t("ObjectStateController",["getState","initializeState","removeState","getServerData","setServerData","getPendingOps","setPendingOp","pushPendingState","popPendingState","mergeFirstPendingState","getObjectCache","estimateAttribute","estimateAttributes","commitServerChanges","enqueueTask","clearAllState"],e),r.ObjectStateController=e},getObjectStateController:function(){return r.ObjectStateController},setPushController:function(e){t("PushController",["send"],e),r.PushController=e},getPushController:function(){return r.PushController},setQueryController:function(e){t("QueryController",["find","aggregate"],e),r.QueryController=e},getQueryController:function(){return r.QueryController},setRESTController:function(e){t("RESTController",["request","ajax"],e),r.RESTController=e},getRESTController:function(){return r.RESTController},setSchemaController:function(e){t("SchemaController",["get","create","update","delete","send","purge"],e),r.SchemaController=e},getSchemaController:function(){return r.SchemaController},setSessionController:function(e){t("SessionController",["getSession"],e),r.SessionController=e},getSessionController:function(){return r.SessionController},setStorageController:function(e){e.async?t("An async StorageController",["getItemAsync","setItemAsync","removeItemAsync"],e):t("A synchronous StorageController",["getItem","setItem","removeItem"],e),r.StorageController=e},getStorageController:function(){return r.StorageController},setAsyncStorage:function(e){r.AsyncStorage=e},getAsyncStorage:function(){return r.AsyncStorage},setUserController:function(e){t("UserController",["setCurrentUser","currentUser","currentUserAsync","signUp","logIn","become","logOut","requestPasswordReset","upgradeToRevocableSession","linkWith"],e),r.UserController=e},getUserController:function(){return r.UserController},setLiveQueryController:function(e){t("LiveQueryController",["subscribe","unsubscribe","open","close"],e),r.LiveQueryController=e},getLiveQueryController:function(){return r.LiveQueryController},setHooksController:function(e){t("HooksController",["create","get","update","remove"],e),r.HooksController=e},getHooksController:function(){return r.HooksController}}}).call(this,e("_process"))},{_process:60}],4:[function(e,t,r){"use strict";t.exports=e("events").EventEmitter},{events:61}],5:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a,o,u=n(e("./parseDate")),i=n(e("./ParseUser")),s=!1,l={authenticate:function(t){var r=this;"undefined"==typeof FB&&t.error(this,"Facebook SDK not found."),FB.login(function(e){e.authResponse?t.success&&t.success(r,{id:e.authResponse.userID,access_token:e.authResponse.accessToken,expiration_date:new Date(1e3*e.authResponse.expiresIn+(new Date).getTime()).toJSON()}):t.error&&t.error(r,e)},{scope:a})},restoreAuthentication:function(e){if(e){var t=(0,u.default)(e.expiration_date),r=t?(t.getTime()-(new Date).getTime())/1e3:0,n={userID:e.id,accessToken:e.access_token,expiresIn:r},i={};if(o)for(var a in o)i[a]=o[a];i.authResponse=n,i.status=!1;var s=FB.getAuthResponse();s&&s.userID!==n.userID&&FB.logout(),FB.init(i)}return!0},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}},f={init:function(e){if("undefined"==typeof FB)throw new Error("The Facebook JavaScript SDK must be loaded before calling init.");if(o={},e)for(var t in e)o[t]=e[t];o.status&&"undefined"!=typeof console&&(console.warn||console.log||function(){}).call(console,'The "status" flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.');o.status=!1,FB.init(o),i.default._registerAuthenticationProvider(l),s=!0},isLinked:function(e){return e._isLinked("facebook")},logIn:function(e,t){if(e&&"string"!=typeof e){var r={};if(t)for(var n in t)r[n]=t[n];return r.authData=e,i.default._logInWith("facebook",r)}if(!s)throw new Error("You must initialize FacebookUtils before calling logIn.");return a=e,i.default._logInWith("facebook",t)},link:function(e,t,r){if(t&&"string"!=typeof t){var n={};if(r)for(var i in r)n[i]=r[i];return n.authData=t,e._linkWith("facebook",n)}if(!s)throw new Error("You must initialize FacebookUtils before calling link.");return a=t,e._linkWith("facebook",r)},unlink:function(e,t){if(!s)throw new Error("You must initialize FacebookUtils before calling unlink.");return e._unlinkFrom("facebook",t)}};r.default=f},{"./ParseUser":26,"./parseDate":40,"@babel/runtime/helpers/interopRequireDefault":52}],6:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault")(e("./Storage")),i=null;function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var s={currentInstallationId:function(){if("string"==typeof i)return Promise.resolve(i);var t=n.default.generatePath("installationId");return n.default.getItemAsync(t).then(function(e){return e?i=e:(e=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a(),n.default.setItemAsync(t,e).then(function(){return i=e}))})},_clearCache:function(){i=null},_setInstallationIdCache:function(e){i=e}};t.exports=s},{"./Storage":30,"@babel/runtime/helpers/interopRequireDefault":52}],7:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),u=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/possibleConstructorReturn")),f=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),c=n(e("@babel/runtime/helpers/assertThisInitialized")),d=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("./EventEmitter")),h=n(e("./ParseObject")),p=n(e("./LiveQuerySubscription")),v=e("./promiseUtils"),y="initialized",b="connecting",m="connected",g="closed",_="reconnecting",C="disconnected",O="connect",P="subscribe",w="unsubscribe",S="connected",k="subscribed",E="unsubscribed",A="error",R="close",I="error",T="open",N="open",j="close",D="error",M=function(e){function o(e){var t,r=e.applicationId,n=e.serverURL,i=e.javascriptKey,a=e.masterKey,s=e.sessionToken;if((0,u.default)(this,o),t=(0,l.default)(this,(0,f.default)(o).call(this)),(0,d.default)((0,c.default)((0,c.default)(t)),"attempts",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"id",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"requestId",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"applicationId",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"serverURL",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"javascriptKey",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"masterKey",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"sessionToken",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"connectPromise",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"subscriptions",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"socket",void 0),(0,d.default)((0,c.default)((0,c.default)(t)),"state",void 0),!n||0!==n.indexOf("ws"))throw new Error("You need to set a proper Parse LiveQuery server url before using LiveQueryClient");return t.reconnectHandle=null,t.attempts=1,t.id=0,t.requestId=1,t.serverURL=n,t.applicationId=r,t.javascriptKey=i,t.masterKey=a,t.sessionToken=s,t.connectPromise=(0,v.resolvingPromise)(),t.subscriptions=new Map,t.state=y,t}return(0,s.default)(o,e),(0,a.default)(o,[{key:"shouldOpen",value:function(){return this.state===y||this.state===C}},{key:"subscribe",value:function(e,t){var r=this;if(e){var n=e.className,i=e.toJSON(),a=i.where,s=i.keys?i.keys.split(","):void 0,o={op:P,requestId:this.requestId,query:{className:n,where:a,fields:s}};t&&(o.sessionToken=t);var u=new p.default(this.requestId,e,t);return this.subscriptions.set(this.requestId,u),this.requestId+=1,this.connectPromise.then(function(){r.socket.send(JSON.stringify(o))}),u.on("error",function(){}),u}}},{key:"unsubscribe",value:function(e){var t=this;if(e){this.subscriptions.delete(e.id);var r={op:w,requestId:e.id};this.connectPromise.then(function(){t.socket.send(JSON.stringify(r))})}}},{key:"open",value:function(){var t=this,e=this._getWebSocketImplementation();e?(this.state!==_&&(this.state=b),this.socket=new e(this.serverURL),this.socket.onopen=function(){t._handleWebSocketOpen()},this.socket.onmessage=function(e){t._handleWebSocketMessage(e)},this.socket.onclose=function(){t._handleWebSocketClose()},this.socket.onerror=function(e){t._handleWebSocketError(e)}):this.emit(I,"Can not find WebSocket implementation")}},{key:"resubscribe",value:function(){var l=this;this.subscriptions.forEach(function(e,t){var r=e.query,n=r.toJSON(),i=n.where,a=n.keys?n.keys.split(","):void 0,s=r.className,o=e.sessionToken,u={op:P,requestId:t,query:{className:s,where:i,fields:a}};o&&(u.sessionToken=o),l.connectPromise.then(function(){l.socket.send(JSON.stringify(u))})})}},{key:"close",value:function(){if(this.state!==y&&this.state!==C){this.state=C,this.socket.close();var e=!0,t=!1,r=void 0;try{for(var n,i=this.subscriptions.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.emit(j)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this._handleReset(),this.emit(R)}}},{key:"_getWebSocketImplementation",value:function(){return"function"==typeof WebSocket||"object"===("undefined"==typeof WebSocket?"undefined":(0,i.default)(WebSocket))?WebSocket:null}},{key:"_handleReset",value:function(){this.attempts=1,this.id=0,this.requestId=1,this.connectPromise=(0,v.resolvingPromise)(),this.subscriptions=new Map}},{key:"_handleWebSocketOpen",value:function(){this.attempts=1;var e={op:O,applicationId:this.applicationId,javascriptKey:this.javascriptKey,masterKey:this.masterKey,sessionToken:this.sessionToken};this.socket.send(JSON.stringify(e))}},{key:"_handleWebSocketMessage",value:function(e){var t=e.data;"string"==typeof t&&(t=JSON.parse(t));var r=null;switch(t.requestId&&(r=this.subscriptions.get(t.requestId)),t.op){case S:this.state===_&&this.resubscribe(),this.emit(T),this.id=t.clientId,this.connectPromise.resolve(),this.state=m;break;case k:r&&r.emit(N);break;case A:t.requestId?r&&r.emit(D,t.error):this.emit(I,t.error);break;case E:break;default:delete t.object.__type;var n=h.default.fromJSON(t.object,!1);if(!r)break;r.emit(t.op,n)}}},{key:"_handleWebSocketClose",value:function(){if(this.state!==C){this.state=g,this.emit(R);var e=!0,t=!1,r=void 0;try{for(var n,i=this.subscriptions.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.emit(j)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this._handleReconnect()}}},{key:"_handleWebSocketError",value:function(e){this.emit(I,e);var t=!0,r=!1,n=void 0;try{for(var i,a=this.subscriptions.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.emit(D)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}this._handleReconnect()}},{key:"_handleReconnect",value:function(){var e=this;if(this.state!==C){this.state=_;var t,r=(t=this.attempts,Math.random()*Math.min(30,Math.pow(2,t)-1)*1e3);this.reconnectHandle&&clearTimeout(this.reconnectHandle),this.reconnectHandle=setTimeout(function(){e.attempts++,e.connectPromise=(0,v.resolvingPromise)(),e.open()}.bind(this),r)}}}]),o}(o.default);r.default=M},{"./EventEmitter":4,"./LiveQuerySubscription":8,"./ParseObject":18,"./promiseUtils":41,"@babel/runtime/helpers/assertThisInitialized":44,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/typeof":58}],8:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),i=n(e("./EventEmitter")),f=n(e("./CoreManager")),c=function(e){function i(e,t,r){var n;return(0,a.default)(this,i),(n=(0,o.default)(this,(0,u.default)(i).call(this))).id=e,n.query=t,n.sessionToken=r,n}return(0,l.default)(i,e),(0,s.default)(i,[{key:"unsubscribe",value:function(){var t=this;return f.default.getLiveQueryController().getDefaultLiveQueryClient().then(function(e){e.unsubscribe(t),t.emit("close")})}}]),i}(i.default);r.default=c},{"./CoreManager":3,"./EventEmitter":4,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55}],9:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.defaultState=function(){return{serverData:{},pendingOps:[{}],objectCache:{},tasks:new i.default,existed:!1}},r.setServerData=function(e,t){for(var r in t)void 0!==t[r]?e[r]=t[r]:delete e[r]},r.setPendingOp=function(e,t,r){var n=e.length-1;r?e[n][t]=r:delete e[n][t]},r.pushPendingState=function(e){e.push({})},r.popPendingState=a,r.mergeFirstPendingState=function(e){var t=a(e),r=e[0];for(var n in t)if(r[n]&&t[n]){var i=r[n].mergeWith(t[n]);i&&(r[n]=i)}else r[n]=t[n]},r.estimateAttribute=function(e,t,r,n,i){for(var a=e[i],s=0;s<t.length;s++)t[s][i]&&(t[s][i]instanceof c.RelationOp?n&&(a=t[s][i].applyTo(a,{className:r,id:n},i)):a=t[s][i].applyTo(a));return a},r.estimateAttributes=function(e,t,r,n){var i={};for(var a in e)i[a]=e[a];for(var s=0;s<t.length;s++)for(a in t[s])t[s][a]instanceof c.RelationOp?n&&(i[a]=t[s][a].applyTo(i[a],{className:r,id:n},a)):i[a]=t[s][a].applyTo(i[a]);return i},r.commitServerChanges=function(e,t,r){for(var n in r){var i=r[n];if((e[n]=i)&&"object"===(0,s.default)(i)&&!(i instanceof l.default)&&!(i instanceof u.default)&&!(i instanceof f.default)){var a=(0,o.default)(i,!1,!0);t[n]=JSON.stringify(a)}}};var s=n(e("@babel/runtime/helpers/typeof")),o=n(e("./encode")),u=n(e("./ParseFile")),l=n(e("./ParseObject")),f=n(e("./ParseRelation")),i=n(e("./TaskQueue")),c=e("./ParseOp");function a(e){var t=e.shift();return e.length||(e[0]={}),t}},{"./ParseFile":14,"./ParseObject":18,"./ParseOp":19,"./ParseRelation":22,"./TaskQueue":32,"./encode":37,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],10:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault"),a=i(e("./decode")),s=i(e("./encode")),o=i(e("./CoreManager")),u=i(e("./InstallationController")),l=n(e("./ParseOp")),f=i(e("./RESTController")),c={initialize:function(e,t){o.default.get("IS_NODE")&&console.log("It looks like you're using the browser version of the SDK in a node.js environment. You should require('parse/node') instead."),c._initialize(e,t)},_initialize:function(e,t,r){o.default.set("APPLICATION_ID",e),o.default.set("JAVASCRIPT_KEY",t),o.default.set("MASTER_KEY",r),o.default.set("USE_MASTER_KEY",!1)},setAsyncStorage:function(e){o.default.setAsyncStorage(e)}};Object.defineProperty(c,"applicationId",{get:function(){return o.default.get("APPLICATION_ID")},set:function(e){o.default.set("APPLICATION_ID",e)}}),Object.defineProperty(c,"javaScriptKey",{get:function(){return o.default.get("JAVASCRIPT_KEY")},set:function(e){o.default.set("JAVASCRIPT_KEY",e)}}),Object.defineProperty(c,"masterKey",{get:function(){return o.default.get("MASTER_KEY")},set:function(e){o.default.set("MASTER_KEY",e)}}),Object.defineProperty(c,"serverURL",{get:function(){return o.default.get("SERVER_URL")},set:function(e){o.default.set("SERVER_URL",e)}}),Object.defineProperty(c,"liveQueryServerURL",{get:function(){return o.default.get("LIVEQUERY_SERVER_URL")},set:function(e){o.default.set("LIVEQUERY_SERVER_URL",e)}}),c.ACL=e("./ParseACL").default,c.Analytics=e("./Analytics"),c.Cloud=e("./Cloud"),c.CoreManager=e("./CoreManager"),c.Config=e("./ParseConfig").default,c.Error=e("./ParseError").default,c.FacebookUtils=e("./FacebookUtils").default,c.File=e("./ParseFile").default,c.GeoPoint=e("./ParseGeoPoint").default,c.Polygon=e("./ParsePolygon").default,c.Installation=e("./ParseInstallation").default,c.Object=e("./ParseObject").default,c.Op={Set:l.SetOp,Unset:l.UnsetOp,Increment:l.IncrementOp,Add:l.AddOp,Remove:l.RemoveOp,AddUnique:l.AddUniqueOp,Relation:l.RelationOp},c.Push=e("./Push"),c.Query=e("./ParseQuery").default,c.Relation=e("./ParseRelation").default,c.Role=e("./ParseRole").default,c.Schema=e("./ParseSchema").default,c.Session=e("./ParseSession").default,c.Storage=e("./Storage"),c.User=e("./ParseUser").default,c.LiveQuery=e("./ParseLiveQuery").default,c.LiveQueryClient=e("./LiveQueryClient").default,c._request=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.default.getRESTController().request.apply(null,t)},c._ajax=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.default.getRESTController().ajax.apply(null,t)},c._decode=function(e,t){return(0,a.default)(t)},c._encode=function(e,t,r){return(0,s.default)(e,r)},c._getInstallationId=function(){return o.default.getInstallationController().currentInstallationId()},o.default.setInstallationController(u.default),o.default.setRESTController(f.default),c.Parse=c,t.exports=c},{"./Analytics":1,"./Cloud":2,"./CoreManager":3,"./FacebookUtils":5,"./InstallationController":6,"./LiveQueryClient":7,"./ParseACL":11,"./ParseConfig":12,"./ParseError":13,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseInstallation":16,"./ParseLiveQuery":17,"./ParseObject":18,"./ParseOp":19,"./ParsePolygon":20,"./ParseQuery":21,"./ParseRelation":22,"./ParseRole":23,"./ParseSchema":24,"./ParseSession":25,"./ParseUser":26,"./Push":27,"./RESTController":28,"./Storage":30,"./decode":36,"./encode":37,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/interopRequireWildcard":53}],11:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("@babel/runtime/helpers/typeof")),o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/defineProperty")),l=n(e("./ParseRole")),f=n(e("./ParseUser")),a=function(){function a(e){if((0,o.default)(this,a),(0,u.default)(this,"permissionsById",void 0),this.permissionsById={},e&&"object"===(0,s.default)(e))if(e instanceof f.default)this.setReadAccess(e,!0),this.setWriteAccess(e,!0);else for(var t in e){var r=e[t];if("string"!=typeof t)throw new TypeError("Tried to create an ACL with an invalid user id.");for(var n in this.permissionsById[t]={},r){var i=r[n];if("read"!==n&&"write"!==n)throw new TypeError("Tried to create an ACL with an invalid permission type.");if("boolean"!=typeof i)throw new TypeError("Tried to create an ACL with an invalid permission value.");this.permissionsById[t][n]=i}}else if("function"==typeof e)throw new TypeError("ParseACL constructed with a function. Did you forget ()?")}return(0,i.default)(a,[{key:"toJSON",value:function(){var e={};for(var t in this.permissionsById)e[t]=this.permissionsById[t];return e}},{key:"equals",value:function(e){if(!(e instanceof a))return!1;var t=Object.keys(this.permissionsById),r=Object.keys(e.permissionsById);if(t.length!==r.length)return!1;for(var n in this.permissionsById){if(!e.permissionsById[n])return!1;if(this.permissionsById[n].read!==e.permissionsById[n].read)return!1;if(this.permissionsById[n].write!==e.permissionsById[n].write)return!1}return!0}},{key:"_setAccess",value:function(e,t,r){if(t instanceof f.default)t=t.id;else if(t instanceof l.default){var n=t.getName();if(!n)throw new TypeError("Role must have a name");t="role:"+n}if("string"!=typeof t)throw new TypeError("userId must be a string.");if("boolean"!=typeof r)throw new TypeError("allowed must be either true or false.");var i=this.permissionsById[t];if(!i){if(!r)return;i={},this.permissionsById[t]=i}r?this.permissionsById[t][e]=!0:(delete i[e],0===Object.keys(i).length&&delete this.permissionsById[t])}},{key:"_getAccess",value:function(e,t){if(t instanceof f.default){if(!(t=t.id))throw new Error("Cannot get access for a ParseUser without an ID")}else if(t instanceof l.default){var r=t.getName();if(!r)throw new TypeError("Role must have a name");t="role:"+r}var n=this.permissionsById[t];return!!n&&!!n[e]}},{key:"setReadAccess",value:function(e,t){this._setAccess("read",e,t)}},{key:"getReadAccess",value:function(e){return this._getAccess("read",e)}},{key:"setWriteAccess",value:function(e,t){this._setAccess("write",e,t)}},{key:"getWriteAccess",value:function(e){return this._getAccess("write",e)}},{key:"setPublicReadAccess",value:function(e){this.setReadAccess("*",e)}},{key:"getPublicReadAccess",value:function(){return this.getReadAccess("*")}},{key:"setPublicWriteAccess",value:function(e){this.setWriteAccess("*",e)}},{key:"getPublicWriteAccess",value:function(){return this.getWriteAccess("*")}},{key:"getRoleReadAccess",value:function(e){if(e instanceof l.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getReadAccess("role:"+e)}},{key:"getRoleWriteAccess",value:function(e){if(e instanceof l.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getWriteAccess("role:"+e)}},{key:"setRoleReadAccess",value:function(e,t){if(e instanceof l.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setReadAccess("role:"+e,t)}},{key:"setRoleWriteAccess",value:function(e,t){if(e instanceof l.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setWriteAccess("role:"+e,t)}}]),a}();r.default=a},{"./ParseRole":23,"./ParseUser":26,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],12:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/defineProperty")),u=n(e("./CoreManager")),l=n(e("./decode")),f=n(e("./escape")),c=n(e("./ParseError")),d=n(e("./Storage")),h=function(){function e(){(0,a.default)(this,e),(0,o.default)(this,"attributes",void 0),(0,o.default)(this,"_escapedAttributes",void 0),this.attributes={},this._escapedAttributes={}}return(0,s.default)(e,[{key:"get",value:function(e){return this.attributes[e]}},{key:"escape",value:function(e){var t=this._escapedAttributes[e];if(t)return t;var r=this.attributes[e],n="";return null!=r&&(n=(0,f.default)(r.toString())),this._escapedAttributes[e]=n}}],[{key:"current",value:function(){return u.default.getConfigController().current()}},{key:"get",value:function(){return u.default.getConfigController().get()}}]),e}(),p=null,v="currentConfig";function y(e){try{var t=JSON.parse(e);if(t&&"object"===(0,i.default)(t))return(0,l.default)(t)}catch(e){return null}}var b={current:function(){if(p)return p;var e,r=new h,t=d.default.generatePath(v);if(!d.default.async()){if(e=d.default.getItem(t)){var n=y(e);n&&(r.attributes=n,p=r)}return r}return d.default.getItemAsync(t).then(function(e){if(e){var t=y(e);t&&(r.attributes=t,p=r)}return r})},get:function(){return u.default.getRESTController().request("GET","config",{},{}).then(function(e){if(!e||!e.params){var t=new c.default(c.default.INVALID_JSON,"Config JSON response invalid.");return Promise.reject(t)}var r=new h;for(var n in r.attributes={},e.params)r.attributes[n]=(0,l.default)(e.params[n]);return p=r,d.default.setItemAsync(d.default.generatePath(v),JSON.stringify(e.params)).then(function(){return r})})}};u.default.setConfigController(b);var m=h;r.default=m},{"./CoreManager":3,"./ParseError":13,"./Storage":30,"./decode":36,"./escape":38,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],13:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),f=function(e){function n(e,t){var r;return(0,i.default)(this,n),(r=(0,s.default)(this,(0,o.default)(n).call(this,t))).code=e,Object.defineProperty((0,l.default)((0,l.default)(r)),"message",{enumerable:!0,value:t}),r}return(0,u.default)(n,e),(0,a.default)(n,[{key:"toString",value:function(){return"ParseError: "+this.code+" "+this.message}}]),n}((0,n(e("@babel/runtime/helpers/wrapNativeSuper")).default)(Error));f.OTHER_CAUSE=-1,f.INTERNAL_SERVER_ERROR=1,f.CONNECTION_FAILED=100,f.OBJECT_NOT_FOUND=101,f.INVALID_QUERY=102,f.INVALID_CLASS_NAME=103,f.MISSING_OBJECT_ID=104,f.INVALID_KEY_NAME=105,f.INVALID_POINTER=106,f.INVALID_JSON=107,f.COMMAND_UNAVAILABLE=108,f.NOT_INITIALIZED=109,f.INCORRECT_TYPE=111,f.INVALID_CHANNEL_NAME=112,f.PUSH_MISCONFIGURED=115,f.OBJECT_TOO_LARGE=116,f.OPERATION_FORBIDDEN=119,f.CACHE_MISS=120,f.INVALID_NESTED_KEY=121,f.INVALID_FILE_NAME=122,f.INVALID_ACL=123,f.TIMEOUT=124,f.INVALID_EMAIL_ADDRESS=125,f.MISSING_CONTENT_TYPE=126,f.MISSING_CONTENT_LENGTH=127,f.INVALID_CONTENT_LENGTH=128,f.FILE_TOO_LARGE=129,f.FILE_SAVE_ERROR=130,f.DUPLICATE_VALUE=137,f.INVALID_ROLE_NAME=139,f.EXCEEDED_QUOTA=140,f.SCRIPT_FAILED=141,f.VALIDATION_ERROR=142,f.INVALID_IMAGE_DATA=143,f.UNSAVED_FILE_ERROR=151,f.INVALID_PUSH_TIME_ERROR=152,f.FILE_DELETE_ERROR=153,f.REQUEST_LIMIT_EXCEEDED=155,f.INVALID_EVENT_NAME=160,f.USERNAME_MISSING=200,f.PASSWORD_MISSING=201,f.USERNAME_TAKEN=202,f.EMAIL_TAKEN=203,f.EMAIL_MISSING=204,f.EMAIL_NOT_FOUND=205,f.SESSION_MISSING=206,f.MUST_CREATE_USER_THROUGH_SIGNUP=207,f.ACCOUNT_ALREADY_LINKED=208,f.INVALID_SESSION_TOKEN=209,f.LINKED_ID_MISSING=250,f.INVALID_LINKED_SESSION=251,f.UNSUPPORTED_SERVICE=252,f.INVALID_SCHEMA_OPERATION=255,f.AGGREGATE_ERROR=600,f.FILE_READ_ERROR=601,f.X_DOMAIN_REQUEST=602;var c=f;r.default=c},{"@babel/runtime/helpers/assertThisInitialized":44,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/wrapNativeSuper":59}],14:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/defineProperty")),a=n(e("./CoreManager")),f=/^data:([a-zA-Z]+\/[-a-zA-Z0-9+.]+)(;charset=[a-zA-Z0-9\-\/]*)?;base64,/;function c(e){if(e<26)return String.fromCharCode(65+e);if(e<52)return String.fromCharCode(e-26+97);if(e<62)return String.fromCharCode(e-52+48);if(62===e)return"+";if(63===e)return"/";throw new TypeError("Tried to encode large digit "+e+" in base64.")}var s=function(){function o(e,t,r){(0,u.default)(this,o),(0,l.default)(this,"_name",void 0),(0,l.default)(this,"_url",void 0),(0,l.default)(this,"_source",void 0),(0,l.default)(this,"_previousSave",void 0);var n=r||"";if(this._name=e,void 0!==t)if(Array.isArray(t))this._source={format:"base64",base64:o.encodeBase64(t),type:n};else if("undefined"!=typeof File&&t instanceof File)this._source={format:"file",file:t,type:n};else{if(!t||"string"!=typeof t.base64)throw new TypeError("Cannot create a Parse.File with that data.");var i=t.base64,a=i.indexOf(",");if(-1!==a){var s=f.exec(i.slice(0,a+1));this._source={format:"base64",base64:i.slice(a+1),type:s[1]}}else this._source={format:"base64",base64:i,type:n}}}return(0,i.default)(o,[{key:"name",value:function(){return this._name}},{key:"url",value:function(e){if(e=e||{},this._url)return e.forceSecure?this._url.replace(/^http:\/\//i,"https://"):this._url}},{key:"save",value:function(e){var t=this;e=e||{};var r=a.default.getFileController();if(this._previousSave||("file"===this._source.format?this._previousSave=r.saveFile(this._name,this._source,e).then(function(e){return t._name=e.name,t._url=e.url,t}):this._previousSave=r.saveBase64(this._name,this._source,e).then(function(e){return t._name=e.name,t._url=e.url,t})),this._previousSave)return this._previousSave}},{key:"toJSON",value:function(){return{__type:"File",name:this._name,url:this._url}}},{key:"equals",value:function(e){return this===e||e instanceof o&&this.name()===e.name()&&this.url()===e.url()&&void 0!==this.url()}}],[{key:"fromJSON",value:function(e){if("File"!==e.__type)throw new TypeError("JSON object does not represent a ParseFile");var t=new o(e.name);return t._url=e.url,t}},{key:"encodeBase64",value:function(e){var t=[];t.length=Math.ceil(e.length/3);for(var r=0;r<t.length;r++){var n=e[3*r],i=e[3*r+1]||0,a=e[3*r+2]||0,s=3*r+1<e.length,o=3*r+2<e.length;t[r]=[c(n>>2&63),c(n<<4&48|i>>4&15),s?c(i<<2&60|a>>6&3):"=",o?c(63&a):"="].join("")}return t.join("")}}]),o}(),o={saveFile:function(e,t){if("file"!==t.format)throw new Error("saveFile can only be used with File-type sources.");var r={"X-Parse-Application-ID":a.default.get("APPLICATION_ID"),"Content-Type":t.type||(t.file?t.file.type:null)},n=a.default.get("JAVASCRIPT_KEY");n&&(r["X-Parse-JavaScript-Key"]=n);var i=a.default.get("SERVER_URL");return"/"!==i[i.length-1]&&(i+="/"),i+="files/"+e,a.default.getRESTController().ajax("POST",i,t.file,r).then(function(e){return e.response})},saveBase64:function(e,t,r){if("base64"!==t.format)throw new Error("saveBase64 can only be used with Base64-type sources.");var n={base64:t.base64};return t.type&&(n._ContentType=t.type),a.default.getRESTController().request("POST","files/"+e,n,r)}};a.default.setFileController(o);var d=s;r.default=d},{"./CoreManager":3,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],15:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/defineProperty")),u=function(){function r(e,t){(0,a.default)(this,r),(0,o.default)(this,"_latitude",void 0),(0,o.default)(this,"_longitude",void 0),Array.isArray(e)?(r._validate(e[0],e[1]),this._latitude=e[0],this._longitude=e[1]):"object"===(0,i.default)(e)?(r._validate(e.latitude,e.longitude),this._latitude=e.latitude,this._longitude=e.longitude):void 0!==e&&void 0!==t?(r._validate(e,t),this._latitude=e,this._longitude=t):(this._latitude=0,this._longitude=0)}return(0,s.default)(r,[{key:"toJSON",value:function(){return r._validate(this._latitude,this._longitude),{__type:"GeoPoint",latitude:this._latitude,longitude:this._longitude}}},{key:"equals",value:function(e){return e instanceof r&&this.latitude===e.latitude&&this.longitude===e.longitude}},{key:"radiansTo",value:function(e){var t=Math.PI/180,r=this.latitude*t,n=this.longitude*t,i=e.latitude*t,a=e.longitude*t,s=Math.sin((r-i)/2),o=Math.sin((n-a)/2),u=s*s+Math.cos(r)*Math.cos(i)*o*o;return u=Math.min(1,u),2*Math.asin(Math.sqrt(u))}},{key:"kilometersTo",value:function(e){return 6371*this.radiansTo(e)}},{key:"milesTo",value:function(e){return 3958.8*this.radiansTo(e)}},{key:"latitude",get:function(){return this._latitude},set:function(e){r._validate(e,this.longitude),this._latitude=e}},{key:"longitude",get:function(){return this._longitude},set:function(e){r._validate(this.latitude,e),this._longitude=e}}],[{key:"_validate",value:function(e,t){if(isNaN(e)||isNaN(t)||"number"!=typeof e||"number"!=typeof t)throw new TypeError("GeoPoint latitude and longitude must be valid numbers");if(e<-90)throw new TypeError("GeoPoint latitude out of bounds: "+e+" < -90.0.");if(90<e)throw new TypeError("GeoPoint latitude out of bounds: "+e+" > 90.0.");if(t<-180)throw new TypeError("GeoPoint longitude out of bounds: "+t+" < -180.0.");if(180<t)throw new TypeError("GeoPoint longitude out of bounds: "+t+" > 180.0.")}},{key:"current",value:function(){return navigator.geolocation.getCurrentPosition(function(e){return new r(e.coords.latitude,e.coords.longitude)})}}]),r}();r.default=u},{"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],16:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./ParseObject")),f=function(e){function r(e){var t;if((0,a.default)(this,r),t=(0,s.default)(this,(0,o.default)(r).call(this,"_Installation")),e&&"object"===(0,i.default)(e)&&!t.set(e||{}))throw new Error("Can't create an invalid Session");return t}return(0,u.default)(r,e),r}(l.default);r.default=f,l.default.registerSubclass("_Installation",f)},{"./ParseObject":18,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/typeof":58}],17:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("./EventEmitter")),o=n(e("./LiveQueryClient")),u=n(e("./CoreManager"));var l=new a.default;l.open=function(){u.default.getLiveQueryController().open()},l.close=function(){u.default.getLiveQueryController().close()},l.on("error",function(){});var f,i=l;function s(){return u.default.getUserController().currentUserAsync().then(function(e){return e?e.getSessionToken():void 0})}function c(){return u.default.getLiveQueryController().getDefaultLiveQueryClient()}r.default=i;var d={setDefaultLiveQueryClient:function(e){f=e},getDefaultLiveQueryClient:function(){return f?Promise.resolve(f):s().then(function(e){var t=u.default.get("LIVEQUERY_SERVER_URL");if(t&&0!==t.indexOf("ws"))throw new Error("You need to set a proper Parse LiveQuery server url before using LiveQueryClient");if(!t){var r=u.default.get("SERVER_URL"),n="ws://";0===r.indexOf("https")&&(n="wss://"),t=n+r.replace(/^https?:\/\//,""),u.default.set("LIVEQUERY_SERVER_URL",t)}var i=u.default.get("APPLICATION_ID"),a=u.default.get("JAVASCRIPT_KEY"),s=u.default.get("MASTER_KEY");return(f=new o.default({applicationId:i,serverURL:t,javascriptKey:a,masterKey:s,sessionToken:e})).on("error",function(e){l.emit("error",e)}),f.on("open",function(){l.emit("open")}),f.on("close",function(){l.emit("close")}),f})},open:function(){c().then(function(e){return e.open()})},close:function(){c().then(function(e){return e.close()})},subscribe:function(n){var i=new a.default;return c().then(function(r){return r.shouldOpen()&&r.open(),s().then(function(e){var t=r.subscribe(n,e);i.id=t.id,i.query=t.query,i.sessionToken=t.sessionToken,i.unsubscribe=t.unsubscribe,t.on("open",function(){i.emit("open")}),t.on("create",function(e){i.emit("create",e)}),t.on("update",function(e){i.emit("update",e)}),t.on("enter",function(e){i.emit("enter",e)}),t.on("leave",function(e){i.emit("leave",e)}),t.on("delete",function(e){i.emit("delete",e)}),t.on("close",function(e){i.emit("close",e)}),t.on("error",function(e){i.emit("error",e)})})}),i},unsubscribe:function(t){c().then(function(e){return e.unsubscribe(t)})},_clearCachedDefaultClient:function(){f=null}};u.default.setLiveQueryController(d)},{"./CoreManager":3,"./EventEmitter":4,"./LiveQueryClient":7,"@babel/runtime/helpers/interopRequireDefault":52}],18:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var y=i(e("@babel/runtime/helpers/typeof")),a=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/defineProperty")),b=i(e("./CoreManager")),h=i(e("./canBeSerialized")),l=i(e("./decode")),f=i(e("./encode")),c=i(e("./escape")),m=i(e("./ParseACL")),d=i(e("./parseDate")),p=i(e("./ParseError")),v=i(e("./ParseFile")),g=e("./promiseUtils"),_=e("./ParseOp"),C=i(e("./ParseQuery")),O=i(e("./ParseRelation")),P=n(e("./SingleInstanceStateController")),u=i(e("./unique")),w=n(e("./UniqueInstanceStateController")),S=i(e("./unsavedChildren")),k={},E=0,A=0,R=!b.default.get("IS_NODE");function I(){var e=b.default.get("SERVER_URL");"/"!==e[e.length-1]&&(e+="/");var t=e.replace(/https?:\/\//,"");return t.substr(t.indexOf("/"))}R?b.default.setObjectStateController(P):b.default.setObjectStateController(w);var T=function(){function u(e,t,r){(0,a.default)(this,u),(0,o.default)(this,"id",void 0),(0,o.default)(this,"_localId",void 0),(0,o.default)(this,"_objCount",void 0),(0,o.default)(this,"className",void 0),"function"==typeof this.initialize&&this.initialize.apply(this,arguments);var n=null;if(this._objCount=A++,"string"==typeof e)this.className=e,t&&"object"===(0,y.default)(t)&&(n=t);else if(e&&"object"===(0,y.default)(e)){for(var i in this.className=e.className,n={},e)"className"!==i&&(n[i]=e[i]);t&&"object"===(0,y.default)(t)&&(r=t)}if(n&&!this.set(n,r))throw new Error("Can't create an invalid Parse Object")}return(0,s.default)(u,[{key:"_getId",value:function(){if("string"==typeof this.id)return this.id;if("string"==typeof this._localId)return this._localId;var e="local"+String(E++);return this._localId=e}},{key:"_getStateIdentifier",value:function(){if(R){var e=this.id;return e||(e=this._getId()),{id:e,className:this.className}}return this}},{key:"_getServerData",value:function(){return b.default.getObjectStateController().getServerData(this._getStateIdentifier())}},{key:"_clearServerData",value:function(){var e=this._getServerData(),t={};for(var r in e)t[r]=void 0;b.default.getObjectStateController().setServerData(this._getStateIdentifier(),t)}},{key:"_getPendingOps",value:function(){return b.default.getObjectStateController().getPendingOps(this._getStateIdentifier())}},{key:"_clearPendingOps",value:function(){var e=this._getPendingOps(),t=e[e.length-1];Object.keys(t).forEach(function(e){delete t[e]})}},{key:"_getDirtyObjectAttributes",value:function(){var e=this.attributes,t=b.default.getObjectStateController().getObjectCache(this._getStateIdentifier()),r={};for(var n in e){var i=e[n];if(i&&"object"===(0,y.default)(i)&&!(i instanceof u)&&!(i instanceof v.default)&&!(i instanceof O.default))try{var a=(0,f.default)(i,!1,!0),s=JSON.stringify(a);t[n]!==s&&(r[n]=i)}catch(e){r[n]=i}}return r}},{key:"_toFullJSON",value:function(e){var t=this.toJSON(e);return t.__type="Object",t.className=this.className,t}},{key:"_getSaveJSON",value:function(){var e=this._getPendingOps(),t=this._getDirtyObjectAttributes(),r={};for(var n in t)r[n]=new _.SetOp(t[n]).toJSON();for(n in e[0])r[n]=e[0][n].toJSON();return r}},{key:"_getSaveParams",value:function(){var e=this.id?"PUT":"POST",t=this._getSaveJSON(),r="classes/"+this.className;return this.id?r+="/"+this.id:"_User"===this.className&&(r="users"),{method:e,body:t,path:r}}},{key:"_finishFetch",value:function(e){!this.id&&e.objectId&&(this.id=e.objectId);var t=b.default.getObjectStateController();t.initializeState(this._getStateIdentifier());var r={};for(var n in e)"ACL"===n?r[n]=new m.default(e[n]):"objectId"!==n&&(r[n]=(0,l.default)(e[n]),r[n]instanceof O.default&&r[n]._ensureParentAndKey(this,n));r.createdAt&&"string"==typeof r.createdAt&&(r.createdAt=(0,d.default)(r.createdAt)),r.updatedAt&&"string"==typeof r.updatedAt&&(r.updatedAt=(0,d.default)(r.updatedAt)),!r.updatedAt&&r.createdAt&&(r.updatedAt=r.createdAt),t.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_setExisted",value:function(e){var t=b.default.getObjectStateController().getState(this._getStateIdentifier());t&&(t.existed=e)}},{key:"_migrateId",value:function(e){if(this._localId&&e)if(R){var t=b.default.getObjectStateController(),r=t.removeState(this._getStateIdentifier());this.id=e,delete this._localId,r&&t.initializeState(this._getStateIdentifier(),r)}else this.id=e,delete this._localId}},{key:"_handleSaveResponse",value:function(e,t){var r={},n=b.default.getObjectStateController(),i=n.popPendingState(this._getStateIdentifier());for(var a in i)i[a]instanceof _.RelationOp?r[a]=i[a].applyTo(void 0,this,a):a in e||(r[a]=i[a].applyTo(void 0));for(a in e)"createdAt"!==a&&"updatedAt"!==a||"string"!=typeof e[a]?"ACL"===a?r[a]=new m.default(e[a]):"objectId"!==a&&(r[a]=(0,l.default)(e[a]),r[a]instanceof _.UnsetOp&&(r[a]=void 0)):r[a]=(0,d.default)(e[a]);r.createdAt&&!r.updatedAt&&(r.updatedAt=r.createdAt),this._migrateId(e.objectId),201!==t&&this._setExisted(!0),n.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_handleSaveError",value:function(){b.default.getObjectStateController().mergeFirstPendingState(this._getStateIdentifier())}},{key:"initialize",value:function(){}},{key:"toJSON",value:function(e){var t=this.id?this.className+":"+this.id:this;e=e||[t];var r={},n=this.attributes;for(var i in n)"createdAt"!==i&&"updatedAt"!==i||!n[i].toJSON?r[i]=(0,f.default)(n[i],!1,!1,e):r[i]=n[i].toJSON();var a=this._getPendingOps();for(var s in a[0])r[s]=a[0][s].toJSON();return this.id&&(r.objectId=this.id),r}},{key:"equals",value:function(e){return this===e||e instanceof u&&this.className===e.className&&this.id===e.id&&void 0!==this.id}},{key:"dirty",value:function(e){if(!this.id)return!0;var t=this._getPendingOps(),r=this._getDirtyObjectAttributes();if(e){if(r.hasOwnProperty(e))return!0;for(var n=0;n<t.length;n++)if(t[n].hasOwnProperty(e))return!0;return!1}return 0!==Object.keys(t[0]).length||0!==Object.keys(r).length}},{key:"dirtyKeys",value:function(){for(var e=this._getPendingOps(),t={},r=0;r<e.length;r++)for(var n in e[r])t[n]=!0;var i=this._getDirtyObjectAttributes();for(var a in i)t[a]=!0;return Object.keys(t)}},{key:"toPointer",value:function(){if(!this.id)throw new Error("Cannot create a pointer to an unsaved ParseObject");return{__type:"Pointer",className:this.className,objectId:this.id}}},{key:"get",value:function(e){return this.attributes[e]}},{key:"relation",value:function(e){var t=this.get(e);if(t){if(!(t instanceof O.default))throw new Error("Called relation() on non-relation field "+e);return t._ensureParentAndKey(this,e),t}return new O.default(this,e)}},{key:"escape",value:function(e){var t=this.attributes[e];if(null==t)return"";if("string"!=typeof t){if("function"!=typeof t.toString)return"";t=t.toString()}return(0,c.default)(t)}},{key:"has",value:function(e){var t=this.attributes;return!!t.hasOwnProperty(e)&&null!=t[e]}},{key:"set",value:function(e,t,r){var n={},i={};if(e&&"object"===(0,y.default)(e))n=e,r=t;else{if("string"!=typeof e)return this;n[e]=t}r=r||{};var a=[];for(var s in"function"==typeof this.constructor.readOnlyAttributes&&(a=a.concat(this.constructor.readOnlyAttributes())),n)if("createdAt"!==s&&"updatedAt"!==s){if(-1<a.indexOf(s))throw new Error("Cannot modify readonly attribute: "+s);r.unset?i[s]=new _.UnsetOp:n[s]instanceof _.Op?i[s]=n[s]:n[s]&&"object"===(0,y.default)(n[s])&&"string"==typeof n[s].__op?i[s]=(0,_.opFromJSON)(n[s]):"objectId"===s||"id"===s?"string"==typeof n[s]&&(this.id=n[s]):"ACL"!==s||"object"!==(0,y.default)(n[s])||n[s]instanceof m.default?i[s]=new _.SetOp(n[s]):i[s]=new _.SetOp(new m.default(n[s]))}var o=this.attributes,u={};for(var l in i)i[l]instanceof _.RelationOp?u[l]=i[l].applyTo(o[l],this,l):i[l]instanceof _.UnsetOp||(u[l]=i[l].applyTo(o[l]));if(!r.ignoreValidation){var f=this.validate(u);if(f)return"function"==typeof r.error&&r.error(this,f),!1}var c=this._getPendingOps(),d=c.length-1,h=b.default.getObjectStateController();for(var p in i){var v=i[p].mergeWith(c[d][p]);h.setPendingOp(this._getStateIdentifier(),p,v)}return this}},{key:"unset",value:function(e,t){return(t=t||{}).unset=!0,this.set(e,null,t)}},{key:"increment",value:function(e,t){if(void 0===t&&(t=1),"number"!=typeof t)throw new Error("Cannot increment by a non-numeric amount.");return this.set(e,new _.IncrementOp(t))}},{key:"add",value:function(e,t){return this.set(e,new _.AddOp([t]))}},{key:"addAll",value:function(e,t){return this.set(e,new _.AddOp(t))}},{key:"addUnique",value:function(e,t){return this.set(e,new _.AddUniqueOp([t]))}},{key:"addAllUnique",value:function(e,t){return this.set(e,new _.AddUniqueOp(t))}},{key:"remove",value:function(e,t){return this.set(e,new _.RemoveOp([t]))}},{key:"removeAll",value:function(e,t){return this.set(e,new _.RemoveOp(t))}},{key:"op",value:function(e){for(var t=this._getPendingOps(),r=t.length;r--;)if(t[r][e])return t[r][e]}},{key:"clone",value:function(){var e=new this.constructor;e.className||(e.className=this.className);var t=this.attributes;if("function"==typeof this.constructor.readOnlyAttributes){var r=this.constructor.readOnlyAttributes()||[],n={};for(var i in t)r.indexOf(i)<0&&(n[i]=t[i]);t=n}return e.set&&e.set(t),e}},{key:"newInstance",value:function(){var e=new this.constructor;if(e.className||(e.className=this.className),e.id=this.id,R)return e;var t=b.default.getObjectStateController();return t&&t.duplicateState(this._getStateIdentifier(),e._getStateIdentifier()),e}},{key:"isNew",value:function(){return!this.id}},{key:"existed",value:function(){if(!this.id)return!1;var e=b.default.getObjectStateController().getState(this._getStateIdentifier());return!!e&&e.existed}},{key:"isValid",value:function(){return!this.validate(this.attributes)}},{key:"validate",value:function(e){if(e.hasOwnProperty("ACL")&&!(e.ACL instanceof m.default))return new p.default(p.default.OTHER_CAUSE,"ACL must be a Parse ACL.");for(var t in e)if(!/^[A-Za-z][0-9A-Za-z_]*$/.test(t))return new p.default(p.default.INVALID_KEY_NAME);return!1}},{key:"getACL",value:function(){var e=this.get("ACL");return e instanceof m.default?e:null}},{key:"setACL",value:function(e,t){return this.set("ACL",e,t)}},{key:"revert",value:function(){this._clearPendingOps()}},{key:"clear",value:function(){var e=this.attributes,t={},r=["createdAt","updatedAt"];for(var n in"function"==typeof this.constructor.readOnlyAttributes&&(r=r.concat(this.constructor.readOnlyAttributes())),e)r.indexOf(n)<0&&(t[n]=!0);return this.set(t,{unset:!0})}},{key:"fetch",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken),e.hasOwnProperty("include")&&(t.include=[],Array.isArray(e.include)?e.include.forEach(function(e){Array.isArray(e)?t.include=t.include.concat(e):t.include.push(e)}):t.include.push(e.include)),b.default.getObjectController().fetch(this,!0,t)}},{key:"fetchWithInclude",value:function(e,t){return(t=t||{}).include=e,this.fetch(t)}},{key:"save",value:function(e,t,r){var n,i,a=this;if("object"===(0,y.default)(e)||void 0===e?(n=e,"object"===(0,y.default)(t)&&(i=t)):((n={})[e]=t,i=r),!i&&n&&(i={},"function"==typeof n.success&&(i.success=n.success,delete n.success),"function"==typeof n.error&&(i.error=n.error,delete n.error)),n){var s=this.validate(n);if(s)return i&&"function"==typeof i.error&&i.error(this,s),Promise.reject(s);this.set(n,i)}var o={};(i=i||{}).hasOwnProperty("useMasterKey")&&(o.useMasterKey=!!i.useMasterKey),i.hasOwnProperty("sessionToken")&&"string"==typeof i.sessionToken&&(o.sessionToken=i.sessionToken);var u=b.default.getObjectController(),l=(0,S.default)(this);return u.save(l,o).then(function(){return u.save(a,o)})}},{key:"destroy",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken),this.id?b.default.getObjectController().destroy(this,t):Promise.resolve()}},{key:"attributes",get:function(){var e=b.default.getObjectStateController();return Object.freeze(e.estimateAttributes(this._getStateIdentifier()))}},{key:"createdAt",get:function(){return this._getServerData().createdAt}},{key:"updatedAt",get:function(){return this._getServerData().updatedAt}}],[{key:"_clearAllState",value:function(){b.default.getObjectStateController().clearAllState()}},{key:"fetchAll",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),t.hasOwnProperty("include")&&(r.include=[],Array.isArray(t.include)?t.include.forEach(function(e){Array.isArray(e)?r.include=r.include.concat(e):r.include.push(e)}):r.include.push(t.include)),b.default.getObjectController().fetch(e,!0,r)}},{key:"fetchAllWithInclude",value:function(e,t,r){return(r=r||{}).include=t,u.fetchAll(e,r)}},{key:"fetchAllIfNeeded",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),b.default.getObjectController().fetch(e,!1,r)}},{key:"destroyAll",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),b.default.getObjectController().destroy(e,r)}},{key:"saveAll",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),b.default.getObjectController().save(e,r)}},{key:"createWithoutData",value:function(e){var t=new this;return t.id=e,t}},{key:"fromJSON",value:function(e,t){if(!e.className)throw new Error("Cannot create an object without a className");var r=k[e.className],n=r?new r:new u(e.className),i={};for(var a in e)"className"!==a&&"__type"!==a&&(i[a]=e[a]);if(t){i.objectId&&(n.id=i.objectId);var s=null;"function"==typeof n._preserveFieldsOnFetch&&(s=n._preserveFieldsOnFetch()),n._clearServerData(),s&&n._finishFetch(s)}return n._finishFetch(i),e.objectId&&n._setExisted(!0),n}},{key:"registerSubclass",value:function(e,t){if("string"!=typeof e)throw new TypeError("The first argument must be a valid class name.");if(void 0===t)throw new TypeError("You must supply a subclass constructor.");if("function"!=typeof t)throw new TypeError("You must register the subclass constructor. Did you attempt to register an instance of the subclass?");(k[e]=t).className||(t.className=e)}},{key:"extend",value:function(e,t,r){if("string"!=typeof e){if(e&&"string"==typeof e.className)return u.extend(e.className,e,t);throw new Error("Parse.Object.extend's first argument should be the className.")}var n=e;"User"===n&&b.default.get("PERFORM_USER_REWRITE")&&(n="_User");var i=u.prototype;this.hasOwnProperty("__super__")&&this.__super__?i=this.prototype:k[n]&&(i=k[n].prototype);var a=function(e,t){if(this.className=n,this._objCount=A++,"function"==typeof this.initialize&&this.initialize.apply(this,arguments),e&&"object"===(0,y.default)(e)&&!this.set(e||{},t))throw new Error("Can't create an invalid Parse Object")};if(a.className=n,a.__super__=i,a.prototype=Object.create(i,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),t)for(var s in t)"className"!==s&&Object.defineProperty(a.prototype,s,{value:t[s],enumerable:!1,writable:!0,configurable:!0});if(r)for(var o in r)"className"!==o&&Object.defineProperty(a,o,{value:r[o],enumerable:!1,writable:!0,configurable:!0});return a.extend=function(e,t,r){return"string"==typeof e?u.extend.call(a,e,t,r):u.extend.call(a,n,e,t)},a.createWithoutData=u.createWithoutData,k[n]=a}},{key:"enableSingleInstance",value:function(){R=!0,b.default.setObjectStateController(P)}},{key:"disableSingleInstance",value:function(){R=!1,b.default.setObjectStateController(w)}}]),u}(),N={fetch:function(t,o,e){if(Array.isArray(t)){if(t.length<1)return Promise.resolve([]);var u=[],r=[],n=null,l=[],i=null;if(t.forEach(function(e){i||(n||(n=e.className),n!==e.className&&(i=new p.default(p.default.INVALID_CLASS_NAME,"All objects should be of the same class")),e.id||(i=new p.default(p.default.MISSING_OBJECT_ID,"All objects must have an ID")),(o||0===Object.keys(e._getServerData()).length)&&(r.push(e.id),u.push(e)),l.push(e))}),i)return Promise.reject(i);var a=new C.default(n);return a.containedIn("objectId",r),e&&e.include&&a.include(e.include),a._limit=r.length,a.find(e).then(function(e){var t={};e.forEach(function(e){t[e.id]=e});for(var r=0;r<u.length;r++){var n=u[r];if((!n||!n.id||!t[n.id])&&o)return Promise.reject(new p.default(p.default.OBJECT_NOT_FOUND,"All objects must exist on the server."))}if(!R)for(var i=0;i<l.length;i++){var a=l[i];if(a&&a.id&&t[a.id]){var s=a.id;a._finishFetch(t[s].toJSON()),l[i]=t[s]}}return Promise.resolve(l)})}var s=b.default.getRESTController(),f={};return e&&e.include&&(f.include=e.include.join()),s.request("GET","classes/"+t.className+"/"+t._getId(),f,e).then(function(e){return t instanceof T&&(t._clearPendingOps(),t._clearServerData(),t._finishFetch(e)),t})},destroy:function(t,e){var r=b.default.getRESTController();if(Array.isArray(t)){if(t.length<1)return Promise.resolve([]);var n=[[]];t.forEach(function(e){e.id&&(n[n.length-1].push(e),20<=n[n.length-1].length&&n.push([]))}),0===n[n.length-1].length&&n.pop();var i=Promise.resolve(),a=[];return n.forEach(function(n){i=i.then(function(){return r.request("POST","batch",{requests:n.map(function(e){return{method:"DELETE",path:I()+"classes/"+e.className+"/"+e._getId(),body:{}}})},e).then(function(e){for(var t=0;t<e.length;t++)if(e[t]&&e[t].hasOwnProperty("error")){var r=new p.default(e[t].error.code,e[t].error.error);r.object=n[t],a.push(r)}})})}),i.then(function(){if(a.length){var e=new p.default(p.default.AGGREGATE_ERROR);return e.errors=a,Promise.reject(e)}return Promise.resolve(t)})}return t instanceof T?r.request("DELETE","classes/"+t.className+"/"+t._getId(),{},e).then(function(){return Promise.resolve(t)}):Promise.resolve(t)},save:function(e,a){var f=b.default.getRESTController(),c=b.default.getObjectStateController();if(Array.isArray(e)){if(e.length<1)return Promise.resolve([]);for(var t=e.concat(),r=0;r<e.length;r++)e[r]instanceof T&&(t=t.concat((0,S.default)(e[r],!0)));t=(0,u.default)(t);var n=Promise.resolve(),d=[];return t.forEach(function(e){e instanceof v.default?n=n.then(function(){return e.save()}):e instanceof T&&d.push(e)}),n.then(function(){var l=null;return(0,g.continueWhile)(function(){return 0<d.length},function(){var r,n,t=[],i=[];if(d.forEach(function(e){t.length<20&&(0,h.default)(e)?t.push(e):i.push(e)}),d=i,t.length<1)return Promise.reject(new p.default(p.default.OTHER_CAUSE,"Tried to save a batch with a cycle."));var s=new Promise(function(e,t){r=e,n=t});s.resolve=r,s.reject=n;var o=[],u=[];return t.forEach(function(n,i){var r,a,e=new Promise(function(e,t){r=e,a=t});e.resolve=r,e.reject=a,o.push(e),c.pushPendingState(n._getStateIdentifier()),u.push(c.enqueueTask(n._getStateIdentifier(),function(){return e.resolve(),s.then(function(e,t){if(e[i].hasOwnProperty("success"))n._handleSaveResponse(e[i].success,t);else{if(!l&&e[i].hasOwnProperty("error")){var r=e[i].error;l=new p.default(r.code,r.error),d=[]}n._handleSaveError()}})}))}),(0,g.when)(o).then(function(){return f.request("POST","batch",{requests:t.map(function(e){var t=e._getSaveParams();return t.path=I()+t.path,t})},a)}).then(function(e,t){s.resolve(e,t)},function(e){s.reject(new p.default(p.default.INCORRECT_TYPE,e.message))}),(0,g.when)(u)}).then(function(){return l?Promise.reject(l):Promise.resolve(e)})})}if(e instanceof T){var i=e;return c.pushPendingState(e._getStateIdentifier()),c.enqueueTask(e._getStateIdentifier(),function(){var e=i._getSaveParams();return f.request(e.method,e.path,e.body,a).then(function(e,t){i._handleSaveResponse(e,t)},function(e){return i._handleSaveError(),Promise.reject(e)})}).then(function(){return e},function(e){return Promise.reject(e)})}return Promise.resolve()}};b.default.setObjectController(N);var j=T;r.default=j},{"./CoreManager":3,"./ParseACL":11,"./ParseError":13,"./ParseFile":14,"./ParseOp":19,"./ParseQuery":21,"./ParseRelation":22,"./SingleInstanceStateController":29,"./UniqueInstanceStateController":33,"./canBeSerialized":35,"./decode":36,"./encode":37,"./escape":38,"./parseDate":40,"./promiseUtils":41,"./unique":42,"./unsavedChildren":43,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/interopRequireWildcard":53,"@babel/runtime/helpers/typeof":58}],19:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.opFromJSON=function(e){if(!e||!e.__op)return null;switch(e.__op){case"Delete":return new g;case"Increment":return new _(e.amount);case"Add":return new C((0,d.default)(e.objects));case"AddUnique":return new O((0,d.default)(e.objects));case"Remove":return new P((0,d.default)(e.objects));case"AddRelation":var t=(0,d.default)(e.objects);return Array.isArray(t)?new w(t,[]):new w([],[]);case"RemoveRelation":var r=(0,d.default)(e.objects);return Array.isArray(r)?new w([],r):new w([],[]);case"Batch":for(var n=[],i=[],a=0;a<e.ops.length;a++)"AddRelation"===e.ops[a].__op?n=n.concat((0,d.default)(e.ops[a].objects)):"RemoveRelation"===e.ops[a].__op&&(i=i.concat((0,d.default)(e.ops[a].objects)));return new w(n,i)}return null},r.RelationOp=r.RemoveOp=r.AddUniqueOp=r.AddOp=r.IncrementOp=r.UnsetOp=r.SetOp=r.Op=void 0;var a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),o=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/assertThisInitialized")),l=n(e("@babel/runtime/helpers/defineProperty")),f=n(e("@babel/runtime/helpers/classCallCheck")),c=n(e("@babel/runtime/helpers/createClass")),i=n(e("./arrayContainsObject")),d=n(e("./decode")),h=n(e("./encode")),p=n(e("./ParseObject")),v=n(e("./ParseRelation")),y=n(e("./unique"));var b=function(){function e(){(0,f.default)(this,e)}return(0,c.default)(e,[{key:"applyTo",value:function(){}},{key:"mergeWith",value:function(){}},{key:"toJSON",value:function(){}}]),e}(),m=function(e){function r(e){var t;return(0,f.default)(this,r),t=(0,a.default)(this,(0,s.default)(r).call(this)),(0,l.default)((0,u.default)((0,u.default)(t)),"_value",void 0),t._value=e,t}return(0,o.default)(r,e),(0,c.default)(r,[{key:"applyTo",value:function(){return this._value}},{key:"mergeWith",value:function(){return new r(this._value)}},{key:"toJSON",value:function(){return(0,h.default)(this._value,!1,!0)}}]),r}(r.Op=b);r.SetOp=m;var g=function(e){function t(){return(0,f.default)(this,t),(0,a.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,o.default)(t,e),(0,c.default)(t,[{key:"applyTo",value:function(){}},{key:"mergeWith",value:function(){return new t}},{key:"toJSON",value:function(){return{__op:"Delete"}}}]),t}(b);r.UnsetOp=g;var _=function(e){function r(e){var t;if((0,f.default)(this,r),t=(0,a.default)(this,(0,s.default)(r).call(this)),(0,l.default)((0,u.default)((0,u.default)(t)),"_amount",void 0),"number"!=typeof e)throw new TypeError("Increment Op must be initialized with a numeric amount.");return t._amount=e,t}return(0,o.default)(r,e),(0,c.default)(r,[{key:"applyTo",value:function(e){if(void 0===e)return this._amount;if("number"!=typeof e)throw new TypeError("Cannot increment a non-numeric value.");return this._amount+e}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof m)return new m(this.applyTo(e._value));if(e instanceof g)return new m(this._amount);if(e instanceof r)return new r(this.applyTo(e._amount));throw new Error("Cannot merge Increment Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Increment",amount:this._amount}}}]),r}(b);r.IncrementOp=_;var C=function(e){function r(e){var t;return(0,f.default)(this,r),t=(0,a.default)(this,(0,s.default)(r).call(this)),(0,l.default)((0,u.default)((0,u.default)(t)),"_value",void 0),t._value=Array.isArray(e)?e:[e],t}return(0,o.default)(r,e),(0,c.default)(r,[{key:"applyTo",value:function(e){if(null==e)return this._value;if(Array.isArray(e))return e.concat(this._value);throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof m)return new m(this.applyTo(e._value));if(e instanceof g)return new m(this._value);if(e instanceof r)return new r(this.applyTo(e._value));throw new Error("Cannot merge Add Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Add",objects:(0,h.default)(this._value,!1,!0)}}}]),r}(b);r.AddOp=C;var O=function(e){function r(e){var t;return(0,f.default)(this,r),t=(0,a.default)(this,(0,s.default)(r).call(this)),(0,l.default)((0,u.default)((0,u.default)(t)),"_value",void 0),t._value=(0,y.default)(Array.isArray(e)?e:[e]),t}return(0,o.default)(r,e),(0,c.default)(r,[{key:"applyTo",value:function(e){if(null==e)return this._value||[];if(Array.isArray(e)){var t=e,r=[];return this._value.forEach(function(e){e instanceof p.default?(0,i.default)(t,e)||r.push(e):t.indexOf(e)<0&&r.push(e)}),e.concat(r)}throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof m)return new m(this.applyTo(e._value));if(e instanceof g)return new m(this._value);if(e instanceof r)return new r(this.applyTo(e._value));throw new Error("Cannot merge AddUnique Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"AddUnique",objects:(0,h.default)(this._value,!1,!0)}}}]),r}(b);r.AddUniqueOp=O;var P=function(e){function n(e){var t;return(0,f.default)(this,n),t=(0,a.default)(this,(0,s.default)(n).call(this)),(0,l.default)((0,u.default)((0,u.default)(t)),"_value",void 0),t._value=(0,y.default)(Array.isArray(e)?e:[e]),t}return(0,o.default)(n,e),(0,c.default)(n,[{key:"applyTo",value:function(e){if(null==e)return[];if(Array.isArray(e)){for(var t=e.concat([]),r=0;r<this._value.length;r++){for(var n=t.indexOf(this._value[r]);-1<n;)t.splice(n,1),n=t.indexOf(this._value[r]);if(this._value[r]instanceof p.default&&this._value[r].id)for(var i=0;i<t.length;i++)t[i]instanceof p.default&&this._value[r].id===t[i].id&&(t.splice(i,1),i--)}return t}throw new Error("Cannot remove elements from a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof m)return new m(this.applyTo(e._value));if(e instanceof g)return new g;if(e instanceof n){for(var t=e._value.concat([]),r=0;r<this._value.length;r++)this._value[r]instanceof p.default?(0,i.default)(t,this._value[r])||t.push(this._value[r]):t.indexOf(this._value[r])<0&&t.push(this._value[r]);return new n(t)}throw new Error("Cannot merge Remove Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Remove",objects:(0,h.default)(this._value,!1,!0)}}}]),n}(b);r.RemoveOp=P;var w=function(e){function i(e,t){var r;return(0,f.default)(this,i),r=(0,a.default)(this,(0,s.default)(i).call(this)),(0,l.default)((0,u.default)((0,u.default)(r)),"_targetClassName",void 0),(0,l.default)((0,u.default)((0,u.default)(r)),"relationsToAdd",void 0),(0,l.default)((0,u.default)((0,u.default)(r)),"relationsToRemove",void 0),r._targetClassName=null,Array.isArray(e)&&(r.relationsToAdd=(0,y.default)(e.map(r._extractId,(0,u.default)((0,u.default)(r))))),Array.isArray(t)&&(r.relationsToRemove=(0,y.default)(t.map(r._extractId,(0,u.default)((0,u.default)(r))))),r}return(0,o.default)(i,e),(0,c.default)(i,[{key:"_extractId",value:function(e){if("string"==typeof e)return e;if(!e.id)throw new Error("You cannot add or remove an unsaved Parse Object from a relation");if(this._targetClassName||(this._targetClassName=e.className),this._targetClassName!==e.className)throw new Error("Tried to create a Relation with 2 different object types: "+this._targetClassName+" and "+e.className+".");return e.id}},{key:"applyTo",value:function(e,t,r){if(!e){if(!t||!r)throw new Error("Cannot apply a RelationOp without either a previous value, or an object and a key");var n=new p.default(t.className);t.id&&0===t.id.indexOf("local")?n._localId=t.id:t.id&&(n.id=t.id);var i=new v.default(n,r);return i.targetClassName=this._targetClassName,i}if(e instanceof v.default){if(this._targetClassName)if(e.targetClassName){if(this._targetClassName!==e.targetClassName)throw new Error("Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in.")}else e.targetClassName=this._targetClassName;return e}throw new Error("Relation cannot be applied to a non-relation field")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof g)throw new Error("You cannot modify a relation after deleting it.");if(e instanceof i){if(e._targetClassName&&e._targetClassName!==this._targetClassName)throw new Error("Related object must be of class "+e._targetClassName+", but "+(this._targetClassName||"null")+" was passed in.");var r=e.relationsToAdd.concat([]);this.relationsToRemove.forEach(function(e){var t=r.indexOf(e);-1<t&&r.splice(t,1)}),this.relationsToAdd.forEach(function(e){r.indexOf(e)<0&&r.push(e)});var n=e.relationsToRemove.concat([]);this.relationsToAdd.forEach(function(e){var t=n.indexOf(e);-1<t&&n.splice(t,1)}),this.relationsToRemove.forEach(function(e){n.indexOf(e)<0&&n.push(e)});var t=new i(r,n);return t._targetClassName=this._targetClassName,t}throw new Error("Cannot merge Relation Op with the previous Op")}},{key:"toJSON",value:function(){var t=this,e=function(e){return{__type:"Pointer",className:t._targetClassName,objectId:e}},r=null,n=null;return 0<this.relationsToAdd.length&&(r={__op:"AddRelation",objects:this.relationsToAdd.map(e)}),0<this.relationsToRemove.length&&(n={__op:"RemoveRelation",objects:this.relationsToRemove.map(e)}),r&&n?{__op:"Batch",ops:[r,n]}:r||n||{}}}]),i}(b);r.RelationOp=w},{"./ParseObject":18,"./ParseRelation":22,"./arrayContainsObject":34,"./decode":36,"./encode":37,"./unique":42,"@babel/runtime/helpers/assertThisInitialized":44,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55}],20:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("./ParseGeoPoint")),u=function(){function n(e){(0,i.default)(this,n),(0,s.default)(this,"_coordinates",void 0),this._coordinates=n._validate(e)}return(0,a.default)(n,[{key:"toJSON",value:function(){return n._validate(this._coordinates),{__type:"Polygon",coordinates:this._coordinates}}},{key:"equals",value:function(e){if(!(e instanceof n)||this.coordinates.length!==e.coordinates.length)return!1;for(var t=!0,r=1;r<this._coordinates.length;r+=1)if(this._coordinates[r][0]!=e.coordinates[r][0]||this._coordinates[r][1]!=e.coordinates[r][1]){t=!1;break}return t}},{key:"containsPoint",value:function(e){for(var t=this._coordinates[0][0],r=this._coordinates[0][0],n=this._coordinates[0][1],i=this._coordinates[0][1],a=1;a<this._coordinates.length;a+=1){var s=this._coordinates[a];t=Math.min(s[0],t),r=Math.max(s[0],r),n=Math.min(s[1],n),i=Math.max(s[1],i)}if(e.latitude<t||e.latitude>r||e.longitude<n||e.longitude>i)return!1;for(var o=!1,u=0,l=this._coordinates.length-1;u<this._coordinates.length;l=u++){var f=this._coordinates[u][0],c=this._coordinates[u][1],d=this._coordinates[l][0],h=this._coordinates[l][1];c>e.longitude!=h>e.longitude&&e.latitude<(d-f)*(e.longitude-c)/(h-c)+f&&(o=!o)}return o}},{key:"coordinates",get:function(){return this._coordinates},set:function(e){this._coordinates=n._validate(e)}}],[{key:"_validate",value:function(e){if(!Array.isArray(e))throw new TypeError("Coordinates must be an Array");if(e.length<3)throw new TypeError("Polygon must have at least 3 GeoPoints or Points");for(var t=[],r=0;r<e.length;r+=1){var n=e[r],i=void 0;if(n instanceof o.default)i=n;else{if(!Array.isArray(n)||2!==n.length)throw new TypeError("Coordinates must be an Array of GeoPoints or Points");i=new o.default(n[0],n[1])}t.push([i.latitude,i.longitude])}return t}}]),n}();r.default=u},{"./ParseGeoPoint":15,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],21:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=n(e("@babel/runtime/helpers/typeof")),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("./CoreManager")),u=n(e("./encode")),c=e("./promiseUtils"),d=n(e("./ParseError")),h=n(e("./ParseGeoPoint")),p=n(e("./ParseObject"));function v(e){return"\\Q"+e.replace("\\E","\\E\\\\E\\Q")+"\\E"}function y(e){var t=null;return e.forEach(function(e){if(t||(t=e.className),t!==e.className)throw new Error("All queries must be for the same class.")}),t}function b(a,e){var s={};(e.forEach(function(e){var t=-1!==e.indexOf(".");if(t||a.hasOwnProperty(e)){if(t){var r=e.split("."),n=a,i=s;r.forEach(function(e,t,r){n&&!n.hasOwnProperty(e)&&(n[e]=void 0),void 0!==n&&(n=n[e]),t<r.length-1&&(i[e]||(i[e]={}),i=i[e])})}}else a[e]=void 0}),0<Object.keys(s).length)&&function e(t,r,n,i){if(i)for(var a in t)t.hasOwnProperty(a)&&!r.hasOwnProperty(a)&&(r[a]=t[a]);for(var s in n)void 0!==r[s]&&null!==r[s]&&null!=t&&e(t[s],r[s],n[s],!0)}(o.default.getObjectStateController().getServerData({id:a.objectId,className:a.className}),a,s,!1)}var l=function(){function l(e){if((0,i.default)(this,l),(0,s.default)(this,"className",void 0),(0,s.default)(this,"_where",void 0),(0,s.default)(this,"_include",void 0),(0,s.default)(this,"_select",void 0),(0,s.default)(this,"_limit",void 0),(0,s.default)(this,"_skip",void 0),(0,s.default)(this,"_order",void 0),(0,s.default)(this,"_extraOptions",void 0),"string"==typeof e)"User"===e&&o.default.get("PERFORM_USER_REWRITE")?this.className="_User":this.className=e;else if(e instanceof p.default)this.className=e.className;else{if("function"!=typeof e)throw new TypeError("A ParseQuery must be constructed with a ParseObject or class name.");if("string"==typeof e.className)this.className=e.className;else{var t=new e;this.className=t.className}}this._where={},this._include=[],this._limit=-1,this._skip=0,this._extraOptions={}}return(0,a.default)(l,[{key:"_orQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$or=t,this}},{key:"_andQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$and=t,this}},{key:"_norQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$nor=t,this}},{key:"_addCondition",value:function(e,t,r){return this._where[e]&&"string"!=typeof this._where[e]||(this._where[e]={}),this._where[e][t]=(0,u.default)(r,!1,!0),this}},{key:"_regexStartWith",value:function(e){return"^"+v(e)}},{key:"toJSON",value:function(){var e={where:this._where};for(var t in this._include.length&&(e.include=this._include.join(",")),this._select&&(e.keys=this._select.join(",")),0<=this._limit&&(e.limit=this._limit),0<this._skip&&(e.skip=this._skip),this._order&&(e.order=this._order.join(",")),this._extraOptions)e[t]=this._extraOptions[t];return e}},{key:"withJSON",value:function(e){for(var t in e.where&&(this._where=e.where),e.include&&(this._include=e.include.split(",")),e.keys&&(this._select=e.keys.split(",")),e.limit&&(this._limit=e.limit),e.skip&&(this._skip=e.skip),e.order&&(this._order=e.order.split(",")),e)e.hasOwnProperty(t)&&-1===["where","include","keys","limit","skip","order"].indexOf(t)&&(this._extraOptions[t]=e[t]);return this}},{key:"get",value:function(e,t){this.equalTo("objectId",e);var r={};return t&&t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t&&t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),this.first(r).then(function(e){if(e)return e;var t=new d.default(d.default.OBJECT_NOT_FOUND,"Object not found.");return Promise.reject(t)})}},{key:"find",value:function(e){var n=this,t={};(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken);var r=o.default.getQueryController(),i=this._select;return r.find(this.className,this.toJSON(),t).then(function(r){return r.results.map(function(e){var t=r.className||n.className;return e.className||(e.className=t),i&&b(e,i),p.default.fromJSON(e,!i)})})}},{key:"count",value:function(e){var t={};(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken);var r=o.default.getQueryController(),n=this.toJSON();return n.limit=0,n.count=1,r.find(this.className,n,t).then(function(e){return e.count})}},{key:"distinct",value:function(e,t){var r={useMasterKey:!0};(t=t||{}).hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken);var n=o.default.getQueryController(),i={distinct:e,where:this._where};return n.aggregate(this.className,i,r).then(function(e){return e.results})}},{key:"aggregate",value:function(e,t){var r={useMasterKey:!0};(t=t||{}).hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken);var n=o.default.getQueryController();if(!Array.isArray(e)&&"object"!==(0,f.default)(e))throw new Error("Invalid pipeline must be Array or Object");return n.aggregate(this.className,{pipeline:e},r).then(function(e){return e.results})}},{key:"first",value:function(e){var r=this,t={};(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken);var n=o.default.getQueryController(),i=this.toJSON();i.limit=1;var a=this._select;return n.find(this.className,i,t).then(function(e){var t=e.results;if(t[0])return t[0].className||(t[0].className=r.className),a&&b(t[0],a),p.default.fromJSON(t[0],!a)})}},{key:"each",value:function(r,e){if(e=e||{},this._order||this._skip||0<=this._limit)return Promise.reject("Cannot iterate on a query with sort, skip, or limit.");var n=new l(this.className);for(var t in n._limit=e.batchSize||100,n._include=this._include.map(function(e){return e}),this._select&&(n._select=this._select.map(function(e){return e})),n._where={},this._where){var i=this._where[t];if(Array.isArray(i))n._where[t]=i.map(function(e){return e});else if(i&&"object"===(0,f.default)(i)){var a={};for(var s in n._where[t]=a,i)a[s]=i[s]}else n._where[t]=i}n.ascending("objectId");var o={};e.hasOwnProperty("useMasterKey")&&(o.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(o.sessionToken=e.sessionToken);var u=!1;return(0,c.continueWhile)(function(){return!u},function(){return n.find(o).then(function(e){var t=Promise.resolve();return e.forEach(function(e){t=t.then(function(){return r(e)})}),t.then(function(){e.length>=n._limit?n.greaterThan("objectId",e[e.length-1].id):u=!0})})})}},{key:"equalTo",value:function(e,t){return void 0===t?this.doesNotExist(e):(this._where[e]=(0,u.default)(t,!1,!0),this)}},{key:"notEqualTo",value:function(e,t){return this._addCondition(e,"$ne",t)}},{key:"lessThan",value:function(e,t){return this._addCondition(e,"$lt",t)}},{key:"greaterThan",value:function(e,t){return this._addCondition(e,"$gt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$lte",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$gte",t)}},{key:"containedIn",value:function(e,t){return this._addCondition(e,"$in",t)}},{key:"notContainedIn",value:function(e,t){return this._addCondition(e,"$nin",t)}},{key:"containedBy",value:function(e,t){return this._addCondition(e,"$containedBy",t)}},{key:"containsAll",value:function(e,t){return this._addCondition(e,"$all",t)}},{key:"containsAllStartingWith",value:function(e,t){var r=this;return Array.isArray(t)||(t=[t]),t=t.map(function(e){return{$regex:r._regexStartWith(e)}}),this.containsAll(e,t)}},{key:"exists",value:function(e){return this._addCondition(e,"$exists",!0)}},{key:"doesNotExist",value:function(e){return this._addCondition(e,"$exists",!1)}},{key:"matches",value:function(e,t,r){return this._addCondition(e,"$regex",t),r||(r=""),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),r.length&&this._addCondition(e,"$options",r),this}},{key:"matchesQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$inQuery",r)}},{key:"doesNotMatchQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$notInQuery",r)}},{key:"matchesKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$select",{key:t,query:n})}},{key:"doesNotMatchKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$dontSelect",{key:t,query:n})}},{key:"contains",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",v(t))}},{key:"fullText",value:function(e,t,r){if(r=r||{},!e)throw new Error("A key is required.");if(!t)throw new Error("A search term is required");if("string"!=typeof t)throw new Error("The value being searched for must be a string.");var n={$term:t};for(var i in r)switch(i){case"language":n.$language=r[i];break;case"caseSensitive":n.$caseSensitive=r[i];break;case"diacriticSensitive":n.$diacriticSensitive=r[i];break;default:throw new Error("Unknown option: ".concat(i))}return this._addCondition(e,"$text",{$search:n})}},{key:"sortByTextScore",value:function(){return this.ascending("$score"),this.select(["$score"]),this}},{key:"startsWith",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",this._regexStartWith(t))}},{key:"endsWith",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",v(t)+"$")}},{key:"near",value:function(e,t){return t instanceof h.default||(t=new h.default(t)),this._addCondition(e,"$nearSphere",t)}},{key:"withinRadians",value:function(e,t,r,n){return n||void 0===n?(this.near(e,t),this._addCondition(e,"$maxDistance",r)):this._addCondition(e,"$geoWithin",{$centerSphere:[[t.longitude,t.latitude],r]})}},{key:"withinMiles",value:function(e,t,r,n){return this.withinRadians(e,t,r/3958.8,n)}},{key:"withinKilometers",value:function(e,t,r,n){return this.withinRadians(e,t,r/6371,n)}},{key:"withinGeoBox",value:function(e,t,r){return t instanceof h.default||(t=new h.default(t)),r instanceof h.default||(r=new h.default(r)),this._addCondition(e,"$within",{$box:[t,r]}),this}},{key:"withinPolygon",value:function(e,t){return this._addCondition(e,"$geoWithin",{$polygon:t})}},{key:"polygonContains",value:function(e,t){return this._addCondition(e,"$geoIntersects",{$point:t})}},{key:"ascending",value:function(){this._order=[];for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addAscending.apply(this,t)}},{key:"addAscending",value:function(){var t=this;this._order||(this._order=[]);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach(function(e){Array.isArray(e)&&(e=e.join()),t._order=t._order.concat(e.replace(/\s/g,"").split(","))}),this}},{key:"descending",value:function(){this._order=[];for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addDescending.apply(this,t)}},{key:"addDescending",value:function(){var t=this;this._order||(this._order=[]);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach(function(e){Array.isArray(e)&&(e=e.join()),t._order=t._order.concat(e.replace(/\s/g,"").split(",").map(function(e){return"-"+e}))}),this}},{key:"skip",value:function(e){if("number"!=typeof e||e<0)throw new Error("You can only skip by a positive number");return this._skip=e,this}},{key:"limit",value:function(e){if("number"!=typeof e)throw new Error("You can only set the limit to a numeric value");return this._limit=e,this}},{key:"include",value:function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach(function(e){Array.isArray(e)?t._include=t._include.concat(e):t._include.push(e)}),this}},{key:"includeAll",value:function(){return this.include("*")}},{key:"select",value:function(){var t=this;this._select||(this._select=[]);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach(function(e){Array.isArray(e)?t._select=t._select.concat(e):t._select.push(e)}),this}},{key:"subscribe",value:function(){return o.default.getLiveQueryController().subscribe(this)}}],[{key:"fromJSON",value:function(e,t){return new l(e).withJSON(t)}},{key:"or",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new l(y(t));return n._orQuery(t),n}},{key:"and",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new l(y(t));return n._andQuery(t),n}},{key:"nor",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new l(y(t));return n._norQuery(t),n}}]),l}(),m={find:function(e,t,r){return o.default.getRESTController().request("GET","classes/"+e,t,r)},aggregate:function(e,t,r){return o.default.getRESTController().request("GET","aggregate/"+e,t,r)}};o.default.setQueryController(m);var g=l;r.default=g},{"./CoreManager":3,"./ParseError":13,"./ParseGeoPoint":15,"./ParseObject":18,"./encode":37,"./promiseUtils":41,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],22:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=e("./ParseOp"),u=(n(e("./ParseObject")),n(e("./ParseQuery"))),l=function(){function r(e,t){(0,i.default)(this,r),(0,s.default)(this,"parent",void 0),(0,s.default)(this,"key",void 0),(0,s.default)(this,"targetClassName",void 0),this.parent=e,this.key=t,this.targetClassName=null}return(0,a.default)(r,[{key:"_ensureParentAndKey",value:function(e,t){if(this.key=this.key||t,this.key!==t)throw new Error("Internal Error. Relation retrieved from two different keys.");if(this.parent){if(this.parent.className!==e.className)throw new Error("Internal Error. Relation retrieved from two different Objects.");if(this.parent.id){if(this.parent.id!==e.id)throw new Error("Internal Error. Relation retrieved from two different Objects.")}else e.id&&(this.parent=e)}else this.parent=e}},{key:"add",value:function(e){Array.isArray(e)||(e=[e]);var t=new o.RelationOp(e,[]),r=this.parent;if(!r)throw new Error("Cannot add to a Relation without a parent");return r.set(this.key,t),this.targetClassName=t._targetClassName,r}},{key:"remove",value:function(e){Array.isArray(e)||(e=[e]);var t=new o.RelationOp([],e);if(!this.parent)throw new Error("Cannot remove from a Relation without a parent");this.parent.set(this.key,t),this.targetClassName=t._targetClassName}},{key:"toJSON",value:function(){return{__type:"Relation",className:this.targetClassName}}},{key:"query",value:function(){var e,t=this.parent;if(!t)throw new Error("Cannot construct a query for a Relation without a parent");return this.targetClassName?e=new u.default(this.targetClassName):(e=new u.default(t.className),e._extraOptions.redirectClassNameForKey=this.key),e._addCondition("$relatedTo","object",{__type:"Pointer",className:t.className,objectId:t.id}),e._addCondition("$relatedTo","key",this.key),e}}]),r}();r.default=l},{"./ParseObject":18,"./ParseOp":19,"./ParseQuery":21,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],23:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/get")),f=n(e("@babel/runtime/helpers/inherits")),c=n(e("./ParseACL")),d=n(e("./ParseError")),i=n(e("./ParseObject")),h=function(e){function i(e,t){var r;return(0,a.default)(this,i),r=(0,o.default)(this,(0,u.default)(i).call(this,"_Role")),"string"==typeof e&&t instanceof c.default&&(r.setName(e),r.setACL(t)),r}return(0,f.default)(i,e),(0,s.default)(i,[{key:"getName",value:function(){var e=this.get("name");return null==e||"string"==typeof e?e:""}},{key:"setName",value:function(e,t){return this.set("name",e,t)}},{key:"getUsers",value:function(){return this.relation("users")}},{key:"getRoles",value:function(){return this.relation("roles")}},{key:"validate",value:function(e,t){var r=(0,l.default)((0,u.default)(i.prototype),"validate",this).call(this,e,t);if(r)return r;if("name"in e&&e.name!==this.getName()){var n=e.name;if(this.id&&this.id!==e.objectId)return new d.default(d.default.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if("string"!=typeof n)return new d.default(d.default.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(n))return new d.default(d.default.OTHER_CAUSE,"A role's name can be only contain alphanumeric characters, _, -, and spaces.")}return!1}}]),i}(i.default);i.default.registerSubclass("_Role",h);var p=h;r.default=p},{"./ParseACL":11,"./ParseError":13,"./ParseObject":18,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/get":49,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55}],24:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("./CoreManager")),u=["String","Number","Boolean","Date","File","GeoPoint","Polygon","Array","Object","Pointer","Relation"],l=function(){function t(e){(0,i.default)(this,t),(0,s.default)(this,"className",void 0),(0,s.default)(this,"_fields",void 0),(0,s.default)(this,"_indexes",void 0),"string"==typeof e&&("User"===e&&o.default.get("PERFORM_USER_REWRITE")?this.className="_User":this.className=e),this._fields={},this._indexes={}}return(0,a.default)(t,[{key:"get",value:function(e){return this.assertClassName(),e=e||{},o.default.getSchemaController().get(this.className,e).then(function(e){if(!e)throw new Error("Schema not found.");return e})}},{key:"save",value:function(e){this.assertClassName(),e=e||{};var t=o.default.getSchemaController(),r={className:this.className,fields:this._fields,indexes:this._indexes};return t.create(this.className,r,e).then(function(e){return e})}},{key:"update",value:function(e){this.assertClassName(),e=e||{};var t=o.default.getSchemaController(),r={className:this.className,fields:this._fields,indexes:this._indexes};return this._fields={},this._indexes={},t.update(this.className,r,e).then(function(e){return e})}},{key:"delete",value:function(e){return this.assertClassName(),e=e||{},o.default.getSchemaController().delete(this.className,e).then(function(e){return e})}},{key:"purge",value:function(){return this.assertClassName(),o.default.getSchemaController().purge(this.className).then(function(e){return e})}},{key:"assertClassName",value:function(){if(!this.className)throw new Error("You must set a Class Name before making any request.")}},{key:"addField",value:function(e,t){if(t=t||"String",!e)throw new Error("field name may not be null.");if(-1===u.indexOf(t))throw new Error("".concat(t," is not a valid type."));return this._fields[e]={type:t},this}},{key:"addIndex",value:function(e,t){if(!e)throw new Error("index name may not be null.");if(!t)throw new Error("index may not be null.");return this._indexes[e]=t,this}},{key:"addString",value:function(e){return this.addField(e,"String")}},{key:"addNumber",value:function(e){return this.addField(e,"Number")}},{key:"addBoolean",value:function(e){return this.addField(e,"Boolean")}},{key:"addDate",value:function(e){return this.addField(e,"Date")}},{key:"addFile",value:function(e){return this.addField(e,"File")}},{key:"addGeoPoint",value:function(e){return this.addField(e,"GeoPoint")}},{key:"addPolygon",value:function(e){return this.addField(e,"Polygon")}},{key:"addArray",value:function(e){return this.addField(e,"Array")}},{key:"addObject",value:function(e){return this.addField(e,"Object")}},{key:"addPointer",value:function(e,t){if(!e)throw new Error("field name may not be null.");if(!t)throw new Error("You need to set the targetClass of the Pointer.");return this._fields[e]={type:"Pointer",targetClass:t},this}},{key:"addRelation",value:function(e,t){if(!e)throw new Error("field name may not be null.");if(!t)throw new Error("You need to set the targetClass of the Relation.");return this._fields[e]={type:"Relation",targetClass:t},this}},{key:"deleteField",value:function(e){this._fields[e]={__op:"Delete"}}},{key:"deleteIndex",value:function(e){this._indexes[e]={__op:"Delete"}}}],[{key:"all",value:function(e){return e=e||{},o.default.getSchemaController().get("",e).then(function(e){if(0===e.results.length)throw new Error("Schema not found.");return e.results})}}]),t}(),f={send:function(e,t,r,n){var i=o.default.getRESTController(),a={useMasterKey:!0};return n.hasOwnProperty("sessionToken")&&(a.sessionToken=n.sessionToken),i.request(t,"schemas/".concat(e),r,a)},get:function(e,t){return this.send(e,"GET",{},t)},create:function(e,t,r){return this.send(e,"POST",t,r)},update:function(e,t,r){return this.send(e,"PUT",t,r)},delete:function(e,t){return this.send(e,"DELETE",{},t)},purge:function(e){return o.default.getRESTController().request("DELETE","purge/".concat(e),{},{useMasterKey:!0})}};o.default.setSchemaController(f);var c=l;r.default=c},{"./CoreManager":3,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],25:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),f=n(e("./CoreManager")),c=n(e("./isRevocableSession")),d=n(e("./ParseObject")),h=n(e("./ParseUser")),p=function(e){function r(e){var t;if((0,a.default)(this,r),t=(0,o.default)(this,(0,u.default)(r).call(this,"_Session")),e&&"object"===(0,i.default)(e)&&!t.set(e||{}))throw new Error("Can't create an invalid Session");return t}return(0,l.default)(r,e),(0,s.default)(r,[{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return"string"==typeof e?e:""}}],[{key:"readOnlyAttributes",value:function(){return["createdWith","expiresAt","installationId","restricted","sessionToken","user"]}},{key:"current",value:function(e){e=e||{};var t=f.default.getSessionController(),r={};return e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),h.default.currentAsync().then(function(e){return e?(r.sessionToken=e.getSessionToken(),t.getSession(r)):Promise.reject("There is no current user.")})}},{key:"isCurrentSessionRevocable",value:function(){var e=h.default.current();return!!e&&(0,c.default)(e.getSessionToken()||"")}}]),r}(d.default);d.default.registerSubclass("_Session",p);var v={getSession:function(e){var t=f.default.getRESTController(),r=new p;return t.request("GET","sessions/me",{},e).then(function(e){return r._finishFetch(e),r._setExisted(!0),r})}};f.default.setSessionController(v);var y=p;r.default=y},{"./CoreManager":3,"./ParseObject":18,"./ParseUser":26,"./isRevocableSession":39,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/typeof":58}],26:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),f=n(e("@babel/runtime/helpers/get")),c=n(e("@babel/runtime/helpers/inherits")),d=n(e("./CoreManager")),h=n(e("./isRevocableSession")),p=n(e("./ParseError")),i=n(e("./ParseObject")),v=n(e("./ParseSession")),y=n(e("./Storage")),b="currentUser",m=!d.default.get("IS_NODE"),g=!1,_=null,C={},O=function(e){function i(e){var t;if((0,a.default)(this,i),t=(0,u.default)(this,(0,l.default)(i).call(this,"_User")),e&&"object"===(0,s.default)(e)&&!t.set(e||{}))throw new Error("Can't create an invalid Parse User");return t}return(0,c.default)(i,e),(0,o.default)(i,[{key:"_upgradeToRevocableSession",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),d.default.getUserController().upgradeToRevocableSession(this,t)}},{key:"_linkWith",value:function(e,t){var r,a=this;if("string"==typeof e?e=C[r=e]:r=e.getAuthType(),t&&t.hasOwnProperty("authData")){var n=this.get("authData")||{};if("object"!==(0,s.default)(n))throw new Error("Invalid type: authData field should be an object");return n[r]=t.authData,d.default.getUserController().linkWith(this,n)}return new Promise(function(n,i){e.authenticate({success:function(e,t){var r={};r.authData=t,a._linkWith(e,r).then(function(){n(a)},function(e){i(e)})},error:function(e,t){i(t)}})})}},{key:"_synchronizeAuthData",value:function(e){if(this.isCurrent()&&e){var t;"string"==typeof e?e=C[t=e]:t=e.getAuthType();var r=this.get("authData");if(e&&r&&"object"===(0,s.default)(r))e.restoreAuthentication(r[t])||this._unlinkFrom(e)}}},{key:"_synchronizeAllAuthData",value:function(){var e=this.get("authData");if("object"===(0,s.default)(e))for(var t in e)this._synchronizeAuthData(t)}},{key:"_cleanupAuthData",value:function(){if(this.isCurrent()){var e=this.get("authData");if("object"===(0,s.default)(e))for(var t in e)e[t]||delete e[t]}}},{key:"_unlinkFrom",value:function(e){var t=this;return"string"==typeof e&&(e=C[e]),this._linkWith(e,{authData:null}).then(function(){return t._synchronizeAuthData(e),Promise.resolve(t)})}},{key:"_isLinked",value:function(e){var t;t="string"==typeof e?e:e.getAuthType();var r=this.get("authData")||{};return"object"===(0,s.default)(r)&&!!r[t]}},{key:"_logOutWithAll",value:function(){var e=this.get("authData");if("object"===(0,s.default)(e))for(var t in e)this._logOutWith(t)}},{key:"_logOutWith",value:function(e){this.isCurrent()&&("string"==typeof e&&(e=C[e]),e&&e.deauthenticate&&e.deauthenticate())}},{key:"_preserveFieldsOnFetch",value:function(){return{sessionToken:this.get("sessionToken")}}},{key:"isCurrent",value:function(){var e=i.current();return!!e&&e.id===this.id}},{key:"getUsername",value:function(){var e=this.get("username");return null==e||"string"==typeof e?e:""}},{key:"setUsername",value:function(e){var t=this.get("authData");t&&"object"===(0,s.default)(t)&&t.hasOwnProperty("anonymous")&&(t.anonymous=null),this.set("username",e)}},{key:"setPassword",value:function(e){this.set("password",e)}},{key:"getEmail",value:function(){var e=this.get("email");return null==e||"string"==typeof e?e:""}},{key:"setEmail",value:function(e){return this.set("email",e)}},{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return null==e||"string"==typeof e?e:""}},{key:"authenticated",value:function(){var e=i.current();return!!this.get("sessionToken")&&!!e&&e.id===this.id}},{key:"signUp",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("installationId")&&(r.installationId=t.installationId),d.default.getUserController().signUp(this,e,r)}},{key:"logIn",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("installationId")&&(t.installationId=e.installationId),d.default.getUserController().logIn(this,t)}},{key:"requestEmailChange",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("installationId")&&(r.installationId=t.installationId),d.default.getUserController().requestEmailChange(this,e,r)}},{key:"save",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,f.default)((0,l.default)(i.prototype),"save",this).apply(this,r).then(function(){return e.isCurrent()?d.default.getUserController().updateUserOnDisk(e):e})}},{key:"destroy",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,f.default)((0,l.default)(i.prototype),"destroy",this).apply(this,r).then(function(){return e.isCurrent()?d.default.getUserController().removeUserFromDisk():e})}},{key:"fetch",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,f.default)((0,l.default)(i.prototype),"fetch",this).apply(this,r).then(function(){return e.isCurrent()?d.default.getUserController().updateUserOnDisk(e):e})}},{key:"fetchWithInclude",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,f.default)((0,l.default)(i.prototype),"fetchWithInclude",this).apply(this,r).then(function(){return e.isCurrent()?d.default.getUserController().updateUserOnDisk(e):e})}}],[{key:"readOnlyAttributes",value:function(){return["sessionToken"]}},{key:"extend",value:function(e,t){if(e)for(var r in e)"className"!==r&&Object.defineProperty(i.prototype,r,{value:e[r],enumerable:!1,writable:!0,configurable:!0});if(t)for(var n in t)"className"!==n&&Object.defineProperty(i,n,{value:t[n],enumerable:!1,writable:!0,configurable:!0});return i}},{key:"current",value:function(){return m?d.default.getUserController().currentUser():null}},{key:"currentAsync",value:function(){return m?d.default.getUserController().currentUserAsync():Promise.resolve(null)}},{key:"signUp",value:function(e,t,r,n){return(r=r||{}).username=e,r.password=t,new i(r).signUp({},n)}},{key:"logIn",value:function(e,t,r){if("string"!=typeof e)return Promise.reject(new p.default(p.default.OTHER_CAUSE,"Username must be a string."));if("string"!=typeof t)return Promise.reject(new p.default(p.default.OTHER_CAUSE,"Password must be a string."));var n=new i;return n._finishFetch({username:e,password:t}),n.logIn(r)}},{key:"become",value:function(e,t){if(!m)throw new Error("It is not memory-safe to become a user in a server environment");var r={sessionToken:e};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),d.default.getUserController().become(r)}},{key:"logInWith",value:function(e,t){return i._logInWith(e,t)}},{key:"logOut",value:function(){if(!m)throw new Error("There is no current user on a node.js server environment.");return d.default.getUserController().logOut()}},{key:"requestPasswordReset",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),d.default.getUserController().requestPasswordReset(e,r)}},{key:"allowCustomUserClass",value:function(e){d.default.set("PERFORM_USER_REWRITE",!e)}},{key:"enableRevocableSession",value:function(e){if(e=e||{},d.default.set("FORCE_REVOCABLE_SESSION",!0),m){var t=i.current();if(t)return t._upgradeToRevocableSession(e)}return Promise.resolve()}},{key:"enableUnsafeCurrentUser",value:function(){m=!0}},{key:"disableUnsafeCurrentUser",value:function(){m=!1}},{key:"_registerAuthenticationProvider",value:function(t){C[t.getAuthType()]=t,i.currentAsync().then(function(e){e&&e._synchronizeAuthData(t.getAuthType())})}},{key:"_logInWith",value:function(e,t){return(new i)._linkWith(e,t)}},{key:"_clearCache",value:function(){_=null,g=!1}},{key:"_setCurrentUserCache",value:function(e){_=e}}]),i}(i.default);i.default.registerSubclass("_User",O);var P={updateUserOnDisk:function(e){var t=y.default.generatePath(b),r=e.toJSON();return r.className="_User",y.default.setItemAsync(t,JSON.stringify(r)).then(function(){return e})},removeUserFromDisk:function(){var e=y.default.generatePath(b);return g=!0,_=null,y.default.removeItemAsync(e)},setCurrentUser:function(e){return(_=e)._cleanupAuthData(),e._synchronizeAllAuthData(),P.updateUserOnDisk(e)},currentUser:function(){if(_)return _;if(g)return null;if(y.default.async())throw new Error("Cannot call currentUser() when using a platform with an async storage system. Call currentUserAsync() instead.");var e=y.default.generatePath(b),t=y.default.getItem(e);if(g=!0,!t)return _=null;(t=JSON.parse(t)).className||(t.className="_User"),t._id&&(t.objectId!==t._id&&(t.objectId=t._id),delete t._id),t._sessionToken&&(t.sessionToken=t._sessionToken,delete t._sessionToken);var r=i.default.fromJSON(t);return(_=r)._synchronizeAllAuthData(),r},currentUserAsync:function(){if(_)return Promise.resolve(_);if(g)return Promise.resolve(null);var e=y.default.generatePath(b);return y.default.getItemAsync(e).then(function(e){if(g=!0,!e)return _=null,Promise.resolve(null);(e=JSON.parse(e)).className||(e.className="_User"),e._id&&(e.objectId!==e._id&&(e.objectId=e._id),delete e._id),e._sessionToken&&(e.sessionToken=e._sessionToken,delete e._sessionToken);var t=i.default.fromJSON(e);return(_=t)._synchronizeAllAuthData(),Promise.resolve(t)})},signUp:function(e,t,r){var n=t&&t.username||e.get("username"),i=t&&t.password||e.get("password");return n&&n.length?i&&i.length?e.save(t,r).then(function(){return e._finishFetch({password:void 0}),m?P.setCurrentUser(e):e}):Promise.reject(new p.default(p.default.OTHER_CAUSE,"Cannot sign up user with an empty password.")):Promise.reject(new p.default(p.default.OTHER_CAUSE,"Cannot sign up user with an empty name."))},logIn:function(t,e){var r=d.default.getRESTController(),n=d.default.getObjectStateController(),i={username:t.get("username"),password:t.get("password")};return r.request("GET","login",i,e).then(function(e){return t._migrateId(e.objectId),t._setExisted(!0),n.setPendingOp(t._getStateIdentifier(),"username",void 0),n.setPendingOp(t._getStateIdentifier(),"password",void 0),e.password=void 0,t._finishFetch(e),m?P.setCurrentUser(t):Promise.resolve(t)})},become:function(e){var t=new O;return d.default.getRESTController().request("GET","users/me",{},e).then(function(e){return t._finishFetch(e),t._setExisted(!0),P.setCurrentUser(t)})},logOut:function(){return P.currentUserAsync().then(function(e){var t=y.default.generatePath(b),r=y.default.removeItemAsync(t),n=d.default.getRESTController();if(null!==e){var i=e.getSessionToken();i&&(0,h.default)(i)&&(r=r.then(function(){return n.request("POST","logout",{},{sessionToken:i})})),e._logOutWithAll(),e._finishFetch({sessionToken:void 0})}return g=!0,_=null,r})},requestPasswordReset:function(e,t){return d.default.getRESTController().request("POST","requestPasswordReset",{email:e},t)},upgradeToRevocableSession:function(r,e){var t=r.getSessionToken();return t?(e.sessionToken=t,d.default.getRESTController().request("POST","upgradeToRevocableSession",{},e).then(function(e){var t=new v.default;return t._finishFetch(e),r._finishFetch({sessionToken:t.getSessionToken()}),r.isCurrent()?P.setCurrentUser(r):Promise.resolve(r)})):Promise.reject(new p.default(p.default.SESSION_MISSING,"Cannot upgrade a user with no session token"))},linkWith:function(e,t){return e.save({authData:t}).then(function(){return m?P.setCurrentUser(e):e})},requestEmailChange:function(e,t,r){var n=e.getSessionToken();return n?(r.sessionToken=n,d.default.getRESTController().request("POST","requestEmailChange",{email:t},r)):Promise.reject(new p.default(p.default.SESSION_MISSING,"Cannot upgrade a user with no session token"))}};d.default.setUserController(P);var w=O;r.default=w},{"./CoreManager":3,"./ParseError":13,"./ParseObject":18,"./ParseSession":25,"./Storage":30,"./isRevocableSession":39,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/get":49,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/typeof":58}],27:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.send=function(e,t){t=t||{},e.where&&e.where instanceof s.default&&(e.where=e.where.toJSON().where);e.push_time&&"object"===(0,i.default)(e.push_time)&&(e.push_time=e.push_time.toJSON());e.expiration_time&&"object"===(0,i.default)(e.expiration_time)&&(e.expiration_time=e.expiration_time.toJSON());if(e.expiration_time&&e.expiration_interval)throw new Error("expiration_time and expiration_interval cannot both be set.");return a.default.getPushController().send(e,{useMasterKey:t.useMasterKey})};var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./CoreManager")),s=n(e("./ParseQuery"));var o={send:function(e,t){return a.default.getRESTController().request("POST","push",e,{useMasterKey:!!t.useMasterKey})}};a.default.setPushController(o)},{"./CoreManager":3,"./ParseQuery":21,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],28:[function(t,r,e){(function(c){"use strict";var e=t("@babel/runtime/helpers/interopRequireDefault"),d=e(t("@babel/runtime/helpers/typeof")),h=e(t("./CoreManager")),p=e(t("./ParseError")),v=null;"undefined"!=typeof XMLHttpRequest&&(v=XMLHttpRequest);var y=!1;"undefined"==typeof XDomainRequest||"withCredentials"in new XMLHttpRequest||(y=!0);var b={ajax:function(t,a,s,o){if(y)return e=t,i=a,u=s,new Promise(function(t,r){var n=new XDomainRequest;n.onload=function(){var e;try{e=JSON.parse(n.responseText)}catch(e){r(e)}e&&t({response:e})},n.onerror=n.ontimeout=function(){var e={responseText:JSON.stringify({code:p.default.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};r(e)},n.onprogress=function(){},n.open(e,i),n.send(u)});var e,i,u,r,n,l=new Promise(function(e,t){r=e,n=t});l.resolve=r,l.reject=n;var f=0;return function r(){if(null==v)throw new Error("Cannot make a request: No definition of XMLHttpRequest was found.");var n=!1,i=new v;for(var e in i.onreadystatechange=function(){if(4===i.readyState&&!n)if(n=!0,200<=i.status&&i.status<300){var e;try{e=JSON.parse(i.responseText),"function"==typeof i.getResponseHeader&&(i.getAllResponseHeaders()||"").includes("x-parse-job-status-id: ")&&(e=i.getResponseHeader("x-parse-job-status-id"))}catch(e){l.reject(e.toString())}e&&l.resolve({response:e,status:i.status,xhr:i})}else if(500<=i.status||0===i.status)if(++f<h.default.get("REQUEST_ATTEMPT_LIMIT")){var t=Math.round(125*Math.random()*Math.pow(2,f));setTimeout(r,t)}else 0===i.status?l.reject("Unable to connect to the Parse API"):l.reject(i);else l.reject(i)},"string"!=typeof(o=o||{})["Content-Type"]&&(o["Content-Type"]="text/plain"),h.default.get("IS_NODE")&&(o["User-Agent"]="Parse/"+h.default.get("VERSION")+" (NodeJS "+c.versions.node+")"),i.open(t,a,!0),o)i.setRequestHeader(e,o[e]);i.send(s)}(),l},request:function(r,e,t,n){n=n||{};var i=h.default.get("SERVER_URL");"/"!==i[i.length-1]&&(i+="/"),i+=e;var a={};if(t&&"object"===(0,d.default)(t))for(var s in t)a[s]=t[s];"POST"!==r&&(a._method=r,r="POST"),a._ApplicationId=h.default.get("APPLICATION_ID");var o=h.default.get("JAVASCRIPT_KEY");o&&(a._JavaScriptKey=o),a._ClientVersion=h.default.get("VERSION");var u=n.useMasterKey;if(void 0===u&&(u=h.default.get("USE_MASTER_KEY")),u){if(!h.default.get("MASTER_KEY"))throw new Error("Cannot use the Master Key, it has not been provided.");delete a._JavaScriptKey,a._MasterKey=h.default.get("MASTER_KEY")}h.default.get("FORCE_REVOCABLE_SESSION")&&(a._RevocableSession="1");var l,f=n.installationId;f&&"string"==typeof f?l=Promise.resolve(f):l=h.default.getInstallationController().currentInstallationId();return l.then(function(e){a._InstallationId=e;var t=h.default.getUserController();return n&&"string"==typeof n.sessionToken?Promise.resolve(n.sessionToken):t?t.currentUserAsync().then(function(e){return e?Promise.resolve(e.getSessionToken()):Promise.resolve(null)}):Promise.resolve(null)}).then(function(e){e&&(a._SessionToken=e);var t=JSON.stringify(a);return b.ajax(r,i,t).then(function(e){return e.response})}).catch(function(t){var r;if(t&&t.responseText)try{var e=JSON.parse(t.responseText);r=new p.default(e.code,e.error)}catch(e){r=new p.default(p.default.INVALID_JSON,"Received an error with invalid JSON from Parse: "+t.responseText)}else r=new p.default(p.default.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(t));return Promise.reject(r)})},_setXHR:function(e){v=e}};r.exports=b}).call(this,t("_process"))},{"./CoreManager":3,"./ParseError":13,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58,_process:60}],29:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(r,"__esModule",{value:!0}),r.getState=s,r.initializeState=o,r.removeState=function(e){var t=s(e);if(null===t)return null;return delete a[e.className][e.id],t},r.getServerData=u,r.setServerData=function(e,t){var r=o(e).serverData;i.setServerData(r,t)},r.getPendingOps=l,r.setPendingOp=function(e,t,r){var n=o(e).pendingOps;i.setPendingOp(n,t,r)},r.pushPendingState=function(e){var t=o(e).pendingOps;i.pushPendingState(t)},r.popPendingState=function(e){var t=o(e).pendingOps;return i.popPendingState(t)},r.mergeFirstPendingState=function(e){var t=l(e);i.mergeFirstPendingState(t)},r.getObjectCache=function(e){var t=s(e);if(t)return t.objectCache;return{}},r.estimateAttribute=function(e,t){var r=u(e),n=l(e);return i.estimateAttribute(r,n,e.className,e.id,t)},r.estimateAttributes=function(e){var t=u(e),r=l(e);return i.estimateAttributes(t,r,e.className,e.id)},r.commitServerChanges=function(e,t){var r=o(e);i.commitServerChanges(r.serverData,r.objectCache,t)},r.enqueueTask=function(e,t){return o(e).tasks.enqueue(t)},r.clearAllState=function(){a={}},r.duplicateState=function(e,t){t.id=e.id};var i=n(e("./ObjectStateMutations")),a={};function s(e){var t=a[e.className];return t&&t[e.id]||null}function o(e,t){var r=s(e);return r||(a[e.className]||(a[e.className]={}),t||(t=i.defaultState()),r=a[e.className][e.id]=t)}function u(e){var t=s(e);return t?t.serverData:{}}function l(e){var t=s(e);return t?t.pendingOps:[{}]}},{"./ObjectStateMutations":9,"@babel/runtime/helpers/interopRequireWildcard":53}],30:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault")(e("./CoreManager")),i={async:function(){return!!n.default.getStorageController().async},getItem:function(e){var t=n.default.getStorageController();if(1===t.async)throw new Error("Synchronous storage is not supported by the current storage controller");return t.getItem(e)},getItemAsync:function(e){var t=n.default.getStorageController();return 1===t.async?t.getItemAsync(e):Promise.resolve(t.getItem(e))},setItem:function(e,t){var r=n.default.getStorageController();if(1===r.async)throw new Error("Synchronous storage is not supported by the current storage controller");return r.setItem(e,t)},setItemAsync:function(e,t){var r=n.default.getStorageController();return 1===r.async?r.setItemAsync(e,t):Promise.resolve(r.setItem(e,t))},removeItem:function(e){var t=n.default.getStorageController();if(1===t.async)throw new Error("Synchronous storage is not supported by the current storage controller");return t.removeItem(e)},removeItemAsync:function(e){var t=n.default.getStorageController();return 1===t.async?t.removeItemAsync(e):Promise.resolve(t.removeItem(e))},generatePath:function(e){if(!n.default.get("APPLICATION_ID"))throw new Error("You need to call Parse.initialize before using Parse.");if("string"!=typeof e)throw new Error("Tried to get a Storage path that was not a String.");return"/"===e[0]&&(e=e.substr(1)),"Parse/"+n.default.get("APPLICATION_ID")+"/"+e},_clear:function(){var e=n.default.getStorageController();e.hasOwnProperty("clear")&&e.clear()}};t.exports=i,n.default.setStorageController(e("./StorageController.browser"))},{"./CoreManager":3,"./StorageController.browser":31,"@babel/runtime/helpers/interopRequireDefault":52}],31:[function(e,t,r){"use strict";var n={async:0,getItem:function(e){return localStorage.getItem(e)},setItem:function(e,t){try{localStorage.setItem(e,t)}catch(e){}},removeItem:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear()}};t.exports=n},{}],32:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=function(){function e(){(0,i.default)(this,e),(0,s.default)(this,"queue",void 0),this.queue=[]}return(0,a.default)(e,[{key:"enqueue",value:function(e){var r,n,t=this,i=new Promise(function(e,t){r=e,n=t});return i.resolve=r,i.reject=n,this.queue.push({task:e,_completion:i}),1===this.queue.length&&e().then(function(){t._dequeue(),i.resolve()},function(e){t._dequeue(),i.reject(e)}),i}},{key:"_dequeue",value:function(){var t=this;if(this.queue.shift(),this.queue.length){var r=this.queue[0];r.task().then(function(){t._dequeue(),r._completion.resolve()},function(e){t._dequeue(),r._completion.reject(e)})}}}]),e}();t.exports=o},{"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],33:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=e("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(r,"__esModule",{value:!0}),r.getState=u,r.initializeState=l,r.removeState=function(e){var t=u(e);if(null===t)return null;return o.delete(e),t},r.getServerData=f,r.setServerData=function(e,t){var r=l(e).serverData;a.setServerData(r,t)},r.getPendingOps=c,r.setPendingOp=function(e,t,r){var n=l(e).pendingOps;a.setPendingOp(n,t,r)},r.pushPendingState=function(e){var t=l(e).pendingOps;a.pushPendingState(t)},r.popPendingState=function(e){var t=l(e).pendingOps;return a.popPendingState(t)},r.mergeFirstPendingState=function(e){var t=c(e);a.mergeFirstPendingState(t)},r.getObjectCache=function(e){var t=u(e);if(t)return t.objectCache;return{}},r.estimateAttribute=function(e,t){var r=f(e),n=c(e);return a.estimateAttribute(r,n,e.className,e.id,t)},r.estimateAttributes=function(e){var t=f(e),r=c(e);return a.estimateAttributes(t,r,e.className,e.id)},r.commitServerChanges=function(e,t){var r=l(e);a.commitServerChanges(r.serverData,r.objectCache,t)},r.enqueueTask=function(e,t){return l(e).tasks.enqueue(t)},r.duplicateState=function(e,t){var r=l(e),n=l(t);for(var i in r.serverData)n.serverData[i]=r.serverData[i];for(var a=0;a<r.pendingOps.length;a++)for(var s in r.pendingOps[a])n.pendingOps[a][s]=r.pendingOps[a][s];for(var o in r.objectCache)n.objectCache[o]=r.objectCache[o];n.existed=r.existed},r.clearAllState=function(){o=new WeakMap};var a=i(e("./ObjectStateMutations")),s=n(e("./TaskQueue")),o=new WeakMap;function u(e){return o.get(e)||null}function l(e,t){var r=u(e);return r||(t||(t={serverData:{},pendingOps:[{}],objectCache:{},tasks:new s.default,existed:!1}),r=t,o.set(e,r),r)}function f(e){var t=u(e);return t?t.serverData:{}}function c(e){var t=u(e);return t?t.pendingOps:[{}]}},{"./ObjectStateMutations":9,"./TaskQueue":32,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/interopRequireWildcard":53}],34:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if(-1<e.indexOf(t))return!0;for(var r=0;r<e.length;r++)if(e[r]instanceof i.default&&e[r].className===t.className&&e[r]._getId()===t._getId())return!0;return!1};var i=n(e("./ParseObject"))},{"./ParseObject":18,"@babel/runtime/helpers/interopRequireDefault":52}],35:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(!(e instanceof s.default))return!0;var t=e.attributes;for(var r in t){var n=t[r];if(!u(n))return!1}return!0};var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./ParseFile")),s=n(e("./ParseObject")),o=n(e("./ParseRelation"));function u(e){if("object"!==(0,i.default)(e))return!0;if(e instanceof o.default)return!0;if(e instanceof s.default)return!!e.id;if(e instanceof a.default)return!!e.url();if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(!u(e[t]))return!1;return!0}for(var r in e)if(!u(e[r]))return!1;return!0}},{"./ParseFile":14,"./ParseObject":18,"./ParseRelation":22,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],36:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function r(e){if(null===e||"object"!==(0,s.default)(e))return e;if(Array.isArray(e)){var n=[];return e.forEach(function(e,t){n[t]=r(e)}),n}if("string"==typeof e.__op)return(0,c.opFromJSON)(e);if("Pointer"===e.__type&&e.className)return f.default.fromJSON(e);if("Object"===e.__type&&e.className)return f.default.fromJSON(e);if("Relation"===e.__type){var t=new d.default(null,null);return t.targetClassName=e.className,t}if("Date"===e.__type)return new Date(e.iso);if("File"===e.__type)return o.default.fromJSON(e);if("GeoPoint"===e.__type)return new u.default({latitude:e.latitude,longitude:e.longitude});if("Polygon"===e.__type)return new l.default(e.coordinates);var i={};for(var a in e)i[a]=r(e[a]);return i};var s=n(e("@babel/runtime/helpers/typeof")),o=(n(e("./ParseACL")),n(e("./ParseFile"))),u=n(e("./ParseGeoPoint")),l=n(e("./ParsePolygon")),f=n(e("./ParseObject")),c=e("./ParseOp"),d=n(e("./ParseRelation"))},{"./ParseACL":11,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseObject":18,"./ParseOp":19,"./ParsePolygon":20,"./ParseRelation":22,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],37:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r,n){return function t(e,r,n,i){if(e instanceof h.default){if(r)throw new Error("Parse Objects not allowed here");var a=e.id?e.className+":"+e.id:e;return n||!i||-1<i.indexOf(a)||e.dirty()||Object.keys(e._getServerData()).length<1?e.toPointer():(i=i.concat(a),e._toFullJSON(i))}if(e instanceof p.Op||e instanceof l.default||e instanceof c.default||e instanceof d.default||e instanceof v.default)return e.toJSON();if(e instanceof f.default){if(!e.url())throw new Error("Tried to encode an unsaved file.");return e.toJSON()}if("[object Date]"===y.call(e)){if(isNaN(e))throw new Error("Tried to encode an invalid date.");return{__type:"Date",iso:e.toJSON()}}if("[object RegExp]"===y.call(e)&&"string"==typeof e.source)return e.source;if(Array.isArray(e))return e.map(function(e){return t(e,r,n,i)});if(e&&"object"===(0,u.default)(e)){var s={};for(var o in e)s[o]=t(e[o],r,n,i);return s}return e}(e,!!t,!!r,n||[])};var u=n(e("@babel/runtime/helpers/typeof")),l=n(e("./ParseACL")),f=n(e("./ParseFile")),c=n(e("./ParseGeoPoint")),d=n(e("./ParsePolygon")),h=n(e("./ParseObject")),p=e("./ParseOp"),v=n(e("./ParseRelation")),y=Object.prototype.toString},{"./ParseACL":11,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseObject":18,"./ParseOp":19,"./ParsePolygon":20,"./ParseRelation":22,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.replace(/[&<>\/'"]/g,function(e){return n[e]})};var n={"&":"&amp;","<":"&lt;",">":"&gt;","/":"&#x2F;","'":"&#x27;",'"':"&quot;"}},{}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return-1<e.indexOf("r:")}},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$").exec(e);if(!t)return null;var r=t[1]||0,n=(t[2]||1)-1,i=t[3]||0,a=t[4]||0,s=t[5]||0,o=t[6]||0,u=t[8]||0;return new Date(Date.UTC(r,n,i,a,s,o,u))}},{}],41:[function(e,t,r){"use strict";function d(){var r,n,e=new Promise(function(e,t){r=e,n=t});return e.resolve=r,e.reject=n,e}Object.defineProperty(r,"__esModule",{value:!0}),r.resolvingPromise=d,r.when=function(e){var t,r=Array.isArray(e);t=r?e:arguments;var n=t.length,i=!1,a=[],s=r?[a]:a,o=[];if(a.length=t.length,o.length=t.length,0===n)return Promise.resolve(s);for(var u=new d,l=function(){--n<=0&&(i?u.reject(o):u.resolve(s))},f=function(e,t){e&&"function"==typeof e.then?e.then(function(e){a[t]=e,l()},function(e){o[t]=e,i=!0,l()}):(a[c]=e,l())},c=0;c<t.length;c++)f(t[c],c);return u},r.continueWhile=function e(t,r){if(t())return r().then(function(){return e(t,r)});return Promise.resolve()}},{}],42:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=[];return e.forEach(function(e){e instanceof a.default?(0,i.default)(t,e)||t.push(e):t.indexOf(e)<0&&t.push(e)}),t};var i=n(e("./arrayContainsObject")),a=n(e("./ParseObject"))},{"./ParseObject":18,"./arrayContainsObject":34,"@babel/runtime/helpers/interopRequireDefault":52}],43:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r={objects:{},files:[]},n=e.className+":"+e._getId();r.objects[n]=!e.dirty()||e;var i=e.attributes;for(var a in i)"object"===(0,u.default)(i[a])&&d(i[a],r,!1,!!t);var s=[];for(var o in r.objects)o!==n&&!0!==r.objects[o]&&s.push(r.objects[o]);return s.concat(r.files)};var u=n(e("@babel/runtime/helpers/typeof")),l=n(e("./ParseFile")),f=n(e("./ParseObject")),c=n(e("./ParseRelation"));function d(e,t,r,n){if(e instanceof f.default){if(!e.id&&r)throw new Error("Cannot create a pointer to an unsaved Object.");var i=e.className+":"+e._getId();if(!t.objects[i]){t.objects[i]=!e.dirty()||e;var a=e.attributes;for(var s in a)"object"===(0,u.default)(a[s])&&d(a[s],t,!n,n)}}else if(e instanceof l.default)!e.url()&&t.files.indexOf(e)<0&&t.files.push(e);else if(!(e instanceof c.default))for(var o in Array.isArray(e)&&e.forEach(function(e){"object"===(0,u.default)(e)&&d(e,t,r,n)}),e)"object"===(0,u.default)(e[o])&&d(e[o],t,r,n)}},{"./ParseFile":14,"./ParseObject":18,"./ParseRelation":22,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],44:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},{}],45:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],46:[function(e,n,t){var a=e("./setPrototypeOf");function i(e,t,r){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?n.exports=i=function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&a(i,r.prototype),i}:n.exports=i=Reflect.construct,i.apply(null,arguments)}n.exports=i},{"./setPrototypeOf":56}],47:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},{}],48:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{}],49:[function(e,n,t){e("./getPrototypeOf");var a=e("./superPropBase");function i(e,t,r){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=i=Reflect.get:n.exports=i=function(e,t,r){var n=a(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},i(e,t,r||e)}n.exports=i},{"./getPrototypeOf":50,"./superPropBase":57}],50:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},{}],51:[function(e,t,r){var n=e("./setPrototypeOf");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},{"./setPrototypeOf":56}],52:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],53:[function(e,t,r){t.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}},{}],54:[function(e,t,r){t.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},{}],55:[function(e,t,r){var n=e("../helpers/typeof"),i=e("./assertThisInitialized");t.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},{"../helpers/typeof":58,"./assertThisInitialized":44}],56:[function(e,r,t){function n(e,t){return r.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}r.exports=n},{}],57:[function(e,t,r){var n=e("./getPrototypeOf");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},{"./getPrototypeOf":50}],58:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(e){return n(e)}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(e)}t.exports=i},{}],59:[function(e,t,r){var n=e("./getPrototypeOf"),i=e("./setPrototypeOf"),a=e("./isNativeFunction"),s=e("./construct");function o(e){var r="function"==typeof Map?new Map:void 0;return t.exports=o=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},o(e)}t.exports=o},{"./construct":46,"./getPrototypeOf":50,"./isNativeFunction":54,"./setPrototypeOf":56}],60:[function(e,t,r){},{}],61:[function(e,t,r){var u=Object.create||function(e){var t=function(){};return t.prototype=e,new t},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r},a=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0;var i,o=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),i=0===l.x}catch(e){i=!1}function f(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var i,a,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]):(a=e._events=u(null),e._eventsCount=0),s){if("function"==typeof s?s=a[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=f(e))&&0<i&&s.length>i){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",o.name,o.message)}}else s=a[t]=r,++e._eventsCount;return e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=a.call(d,n);return i.listener=r,n.wrapFn=i}function p(e,t,r){var n=e._events;if(!n)return[];var i=n[t];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):y(i,i.length):[]}function v(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}i?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');o=e}}):n.defaultMaxListeners=o,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return f(this)},n.prototype.emit=function(e){var t,r,n,i,a,s,o="error"===e;if(s=this._events)o=o&&null==s.error;else if(!o)return!1;if(o){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(r=s[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,i=y(e,n),a=0;a<n;++a)i[a].call(r)}(r,l,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,a=y(e,i),s=0;s<i;++s)a[s].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var a=e.length,s=y(e,a),o=0;o<a;++o)s[o].call(r,n,i)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,a){if(t)e.call(r,n,i,a);else for(var s=e.length,o=y(e,s),u=0;u<s;++u)o[u].call(r,n,i,a)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),a=1;a<n;a++)i[a-1]=arguments[a];!function(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,a=y(e,i),s=0;s<i;++s)a[s].apply(r,n)}(r,l,this,i)}return!0},n.prototype.on=n.prototype.addListener=function(e,t){return c(this,e,t,!1)},n.prototype.prependListener=function(e,t){return c(this,e,t,!0)},n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,n,i,a,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=u(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length-1;0<=a;a--)if(r[a]===t||r[a].listener===t){s=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),n.removeListener&&this.emit("removeListener",e,s||t)}return this},n.prototype.removeAllListeners=function(e){var t,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=u(null):delete r[e]),this;if(0===arguments.length){var i,a=s(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;0<=n;n--)this.removeListener(e,t[n]);return this},n.prototype.listeners=function(e){return p(this,e,!0)},n.prototype.rawListeners=function(e){return p(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},n.prototype.listenerCount=v,n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}]},{},[10])(10)});